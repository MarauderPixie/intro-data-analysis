<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4.3 Data manipulation: the basics | Introduction to Data Analysis</title>
  <meta name="description" content="Course Material for I2DA-2019 in Cognitive Science at University Osnabrück" />
  <meta name="generator" content="bookdown 0.20.6 and GitBook 2.6.7" />

  <meta property="og:title" content="4.3 Data manipulation: the basics | Introduction to Data Analysis" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Course Material for I2DA-2019 in Cognitive Science at University Osnabrück" />
  <meta name="github-repo" content="michael-franke/intro-data-analysis" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4.3 Data manipulation: the basics | Introduction to Data Analysis" />
  
  <meta name="twitter:description" content="Course Material for I2DA-2019 in Cognitive Science at University Osnabrück" />
  

<meta name="author" content="Michael Franke" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Chap-02-02-data-tidy-data.html"/>
<link rel="next" href="Chap-02-02-data-grouping-nesting.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<!--<link rel="stylesheet" href="https://s3-us-west-2.amazonaws.com/cdn.webppl.org/webppl-editor-1.0.9.css">-->
<link rel="stylesheet" href="https://s3-us-west-2.amazonaws.com/cdn.webppl.org/webppl-viz-0.7.11.css">

<script src="https://s3-us-west-2.amazonaws.com/cdn.webppl.org/webppl-editor-1.0.9.js"></script>
<script src="https://s3-us-west-2.amazonaws.com/cdn.webppl.org/webppl-viz-0.7.11.js"></script>
<script src="https://s3-us-west-2.amazonaws.com/cdn.webppl.org/webppl-v0.9.13.js" defer async></script>

<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/envisioned.css" rel="stylesheet" />

<script type="application/javascript">
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.collapsibleSolution').forEach(function(collapsible) {
    const content = collapsible.querySelector('.content')
    content.style.display = 'none';
    collapsible.querySelector('.trigger').addEventListener('click', function() {
      if (content.style.display === 'none') {
        content.style.display = 'block';
      } else {
        content.style.display = 'none';
      }
    })
  })
})
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />
<link rel="stylesheet" href="webppl-editor.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="part"><span><b>I Preliminaries</b></span></li>
<li class="chapter" data-level="1" data-path="general-introduction.html"><a href="general-introduction.html"><i class="fa fa-check"></i><b>1</b> General Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="Chap-01-00-intro-learning-goals.html"><a href="Chap-01-00-intro-learning-goals.html"><i class="fa fa-check"></i><b>1.1</b> Learning goals</a></li>
<li class="chapter" data-level="1.2" data-path="Chap-01-00-intro-course-structure.html"><a href="Chap-01-00-intro-course-structure.html"><i class="fa fa-check"></i><b>1.2</b> Course structure</a></li>
<li class="chapter" data-level="1.3" data-path="Chap-01-00-intro-tools-methods.html"><a href="Chap-01-00-intro-tools-methods.html"><i class="fa fa-check"></i><b>1.3</b> Tools and topics covered (and not covered) in the course</a></li>
<li class="chapter" data-level="1.4" data-path="Chap-01-00-intro-data-sets.html"><a href="Chap-01-00-intro-data-sets.html"><i class="fa fa-check"></i><b>1.4</b> Data sets covered</a></li>
<li class="chapter" data-level="1.5" data-path="Chap-01-00-intro-installation.html"><a href="Chap-01-00-intro-installation.html"><i class="fa fa-check"></i><b>1.5</b> Installation</a><ul>
<li class="chapter" data-level="1.5.1" data-path="Chap-01-00-intro-installation.html"><a href="Chap-01-00-intro-installation.html#Chap-01-00-intro-installation-VirtualBox"><i class="fa fa-check"></i><b>1.5.1</b> VirtualBox Setup</a></li>
<li class="chapter" data-level="1.5.2" data-path="Chap-01-00-intro-installation.html"><a href="Chap-01-00-intro-installation.html#Chap-01-00-intro-installation-Manual"><i class="fa fa-check"></i><b>1.5.2</b> Manual installation</a></li>
<li class="chapter" data-level="1.5.3" data-path="Chap-01-00-intro-installation.html"><a href="Chap-01-00-intro-installation.html#Chap-01-00-intro-installation-Updating"><i class="fa fa-check"></i><b>1.5.3</b> Updating the course package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Chap-01-01-R.html"><a href="Chap-01-01-R.html"><i class="fa fa-check"></i><b>2</b> Basics of R</a><ul>
<li class="chapter" data-level="2.1" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html"><i class="fa fa-check"></i><b>2.1</b> First steps</a><ul>
<li class="chapter" data-level="2.1.1" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#functions"><i class="fa fa-check"></i><b>2.1.1</b> Functions</a></li>
<li class="chapter" data-level="2.1.2" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#variables"><i class="fa fa-check"></i><b>2.1.2</b> Variables</a></li>
<li class="chapter" data-level="2.1.3" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#literate-coding"><i class="fa fa-check"></i><b>2.1.3</b> Literate coding</a></li>
<li class="chapter" data-level="2.1.4" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#objects"><i class="fa fa-check"></i><b>2.1.4</b> Objects</a></li>
<li class="chapter" data-level="2.1.5" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#packages"><i class="fa fa-check"></i><b>2.1.5</b> Packages</a></li>
<li class="chapter" data-level="2.1.6" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#Chap-01-01-R-help"><i class="fa fa-check"></i><b>2.1.6</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="ch1-data-types.html"><a href="ch1-data-types.html"><i class="fa fa-check"></i><b>2.2</b> Data types</a><ul>
<li class="chapter" data-level="2.2.1" data-path="ch1-data-types.html"><a href="ch1-data-types.html#numeric-vectors-matrices"><i class="fa fa-check"></i><b>2.2.1</b> Numeric vectors &amp; matrices</a></li>
<li class="chapter" data-level="2.2.2" data-path="ch1-data-types.html"><a href="ch1-data-types.html#booleans"><i class="fa fa-check"></i><b>2.2.2</b> Booleans</a></li>
<li class="chapter" data-level="2.2.3" data-path="ch1-data-types.html"><a href="ch1-data-types.html#special-values"><i class="fa fa-check"></i><b>2.2.3</b> Special values</a></li>
<li class="chapter" data-level="2.2.4" data-path="ch1-data-types.html"><a href="ch1-data-types.html#characters-strings"><i class="fa fa-check"></i><b>2.2.4</b> Characters (= strings)</a></li>
<li class="chapter" data-level="2.2.5" data-path="ch1-data-types.html"><a href="ch1-data-types.html#factors"><i class="fa fa-check"></i><b>2.2.5</b> Factors</a></li>
<li class="chapter" data-level="2.2.6" data-path="ch1-data-types.html"><a href="ch1-data-types.html#lists-data-frames-tibbles"><i class="fa fa-check"></i><b>2.2.6</b> Lists, data frames &amp; tibbles</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="Chap-01-01-functions.html"><a href="Chap-01-01-functions.html"><i class="fa fa-check"></i><b>2.3</b> Functions</a><ul>
<li class="chapter" data-level="2.3.1" data-path="Chap-01-01-functions.html"><a href="Chap-01-01-functions.html#some-important-built-in-functions"><i class="fa fa-check"></i><b>2.3.1</b> Some important built-in functions</a></li>
<li class="chapter" data-level="2.3.2" data-path="Chap-01-01-functions.html"><a href="Chap-01-01-functions.html#defining-your-own-functions"><i class="fa fa-check"></i><b>2.3.2</b> Defining your own functions</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="ch-01-01-loops-and-maps.html"><a href="ch-01-01-loops-and-maps.html"><i class="fa fa-check"></i><b>2.4</b> Loops and maps</a></li>
<li class="chapter" data-level="2.5" data-path="Chap-01-01-piping.html"><a href="Chap-01-01-piping.html"><i class="fa fa-check"></i><b>2.5</b> Piping</a></li>
<li class="chapter" data-level="2.6" data-path="ch-01-01-Rmarkdown.html"><a href="ch-01-01-Rmarkdown.html"><i class="fa fa-check"></i><b>2.6</b> Rmarkdown</a></li>
</ul></li>
<li class="part"><span><b>II Data</b></span></li>
<li class="chapter" data-level="3" data-path="Chap-02-01-data.html"><a href="Chap-02-01-data.html"><i class="fa fa-check"></i><b>3</b> Data, variables &amp; experimental designs</a><ul>
<li class="chapter" data-level="3.1" data-path="Chap-02-01-data-kinds-of-data.html"><a href="Chap-02-01-data-kinds-of-data.html"><i class="fa fa-check"></i><b>3.1</b> Different kinds of data</a></li>
<li class="chapter" data-level="3.2" data-path="Chap-02-01-data-variables.html"><a href="Chap-02-01-data-variables.html"><i class="fa fa-check"></i><b>3.2</b> On the notion of “variables”</a></li>
<li class="chapter" data-level="3.3" data-path="Chap-02-01-data-exp-design.html"><a href="Chap-02-01-data-exp-design.html"><i class="fa fa-check"></i><b>3.3</b> Basics of experimental design</a><ul>
<li class="chapter" data-level="3.3.1" data-path="Chap-02-01-data-exp-design.html"><a href="Chap-02-01-data-exp-design.html#what-to-analyze-dependent-variables"><i class="fa fa-check"></i><b>3.3.1</b> What to analyze? – Dependent variables</a></li>
<li class="chapter" data-level="3.3.2" data-path="Chap-02-01-data-exp-design.html"><a href="Chap-02-01-data-exp-design.html#conditions-trials-items"><i class="fa fa-check"></i><b>3.3.2</b> Conditions, trials, items</a></li>
<li class="chapter" data-level="3.3.3" data-path="Chap-02-01-data-exp-design.html"><a href="Chap-02-01-data-exp-design.html#sample-size"><i class="fa fa-check"></i><b>3.3.3</b> Sample size</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>4</b> Data Wrangling</a><ul>
<li class="chapter" data-level="4.1" data-path="Chap-02-02-data-IO.html"><a href="Chap-02-02-data-IO.html"><i class="fa fa-check"></i><b>4.1</b> Data in, data out</a></li>
<li class="chapter" data-level="4.2" data-path="Chap-02-02-data-tidy-data.html"><a href="Chap-02-02-data-tidy-data.html"><i class="fa fa-check"></i><b>4.2</b> Tidy data</a><ul>
<li class="chapter" data-level="4.2.1" data-path="Chap-02-02-data-tidy-data.html"><a href="Chap-02-02-data-tidy-data.html#running-example"><i class="fa fa-check"></i><b>4.2.1</b> Running example</a></li>
<li class="chapter" data-level="4.2.2" data-path="Chap-02-02-data-tidy-data.html"><a href="Chap-02-02-data-tidy-data.html#definition-of-tidy-data"><i class="fa fa-check"></i><b>4.2.2</b> Definition of <em>tidy data</em></a></li>
<li class="chapter" data-level="4.2.3" data-path="Chap-02-02-data-tidy-data.html"><a href="Chap-02-02-data-tidy-data.html#excursion-non-redundant-data"><i class="fa fa-check"></i><b>4.2.3</b> Excursion: non-redundant data</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html"><i class="fa fa-check"></i><b>4.3</b> Data manipulation: the basics</a><ul>
<li class="chapter" data-level="4.3.1" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#pivoting"><i class="fa fa-check"></i><b>4.3.1</b> Pivoting</a></li>
<li class="chapter" data-level="4.3.2" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#subsetting-row-columns"><i class="fa fa-check"></i><b>4.3.2</b> Subsetting row &amp; columns</a></li>
<li class="chapter" data-level="4.3.3" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#Chap-02-02-tidy-selection"><i class="fa fa-check"></i><b>4.3.3</b> Tidy selection of column names</a></li>
<li class="chapter" data-level="4.3.4" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#adding-changing-and-renaming-columns"><i class="fa fa-check"></i><b>4.3.4</b> Adding, changing and renaming columns</a></li>
<li class="chapter" data-level="4.3.5" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#splitting-and-uniting-columns"><i class="fa fa-check"></i><b>4.3.5</b> Splitting and uniting columns</a></li>
<li class="chapter" data-level="4.3.6" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#sorting-a-data-set"><i class="fa fa-check"></i><b>4.3.6</b> Sorting a data set</a></li>
<li class="chapter" data-level="4.3.7" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#combining-tibbles"><i class="fa fa-check"></i><b>4.3.7</b> Combining tibbles</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="Chap-02-02-data-grouping-nesting.html"><a href="Chap-02-02-data-grouping-nesting.html"><i class="fa fa-check"></i><b>4.4</b> Grouped operations</a></li>
<li class="chapter" data-level="4.5" data-path="Chap-02-02-data-case-study-KoF.html"><a href="Chap-02-02-data-case-study-KoF.html"><i class="fa fa-check"></i><b>4.5</b> Case study: the King of France</a><ul>
<li class="chapter" data-level="4.5.1" data-path="Chap-02-02-data-case-study-KoF.html"><a href="Chap-02-02-data-case-study-KoF.html#cleaning-the-data"><i class="fa fa-check"></i><b>4.5.1</b> Cleaning the data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Chap-02-03-summary-statistics.html"><a href="Chap-02-03-summary-statistics.html"><i class="fa fa-check"></i><b>5</b> Summary statistics</a><ul>
<li class="chapter" data-level="5.1" data-path="Chap-02-03-summary-statistics-counts.html"><a href="Chap-02-03-summary-statistics-counts.html"><i class="fa fa-check"></i><b>5.1</b> Counts and proportions</a><ul>
<li class="chapter" data-level="5.1.1" data-path="Chap-02-03-summary-statistics-counts.html"><a href="Chap-02-03-summary-statistics-counts.html#loading-and-inspecting-the-data"><i class="fa fa-check"></i><b>5.1.1</b> Loading and inspecting the data</a></li>
<li class="chapter" data-level="5.1.2" data-path="Chap-02-03-summary-statistics-counts.html"><a href="Chap-02-03-summary-statistics-counts.html#obtaining-counts-with-n-count-and-tally"><i class="fa fa-check"></i><b>5.1.2</b> Obtaining counts with <code>n</code>, <code>count</code> and <code>tally</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html"><i class="fa fa-check"></i><b>5.2</b> Central tendency and dispersion</a><ul>
<li class="chapter" data-level="5.2.1" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html#the-data-for-the-remainder-of-the-chapter"><i class="fa fa-check"></i><b>5.2.1</b> The data for the remainder of the chapter</a></li>
<li class="chapter" data-level="5.2.2" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>5.2.2</b> Measures of central tendency</a></li>
<li class="chapter" data-level="5.2.3" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html#measures-of-dispersion"><i class="fa fa-check"></i><b>5.2.3</b> Measures of dispersion</a></li>
<li class="chapter" data-level="5.2.4" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html#quantifying-confidence-with-bootstrapping"><i class="fa fa-check"></i><b>5.2.4</b> Quantifying confidence with bootstrapping</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="Chap-02-03-summary-statistics-2D.html"><a href="Chap-02-03-summary-statistics-2D.html"><i class="fa fa-check"></i><b>5.3</b> Covariance and correlation</a><ul>
<li class="chapter" data-level="5.3.1" data-path="Chap-02-03-summary-statistics-2D.html"><a href="Chap-02-03-summary-statistics-2D.html#covariance"><i class="fa fa-check"></i><b>5.3.1</b> Covariance</a></li>
<li class="chapter" data-level="5.3.2" data-path="Chap-02-03-summary-statistics-2D.html"><a href="Chap-02-03-summary-statistics-2D.html#correlation"><i class="fa fa-check"></i><b>5.3.2</b> Correlation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="Chap-02-02-visualization.html"><a href="Chap-02-02-visualization.html"><i class="fa fa-check"></i><b>6</b> Data Visualization</a><ul>
<li class="chapter" data-level="6.1" data-path="Chap-02-04-Anscombe-example.html"><a href="Chap-02-04-Anscombe-example.html"><i class="fa fa-check"></i><b>6.1</b> Motivating example: Anscombe’s quartet</a></li>
<li class="chapter" data-level="6.2" data-path="Chap-02-04-good-visualization.html"><a href="Chap-02-04-good-visualization.html"><i class="fa fa-check"></i><b>6.2</b> Visualization: the good, the bad and the info-graphic</a></li>
<li class="chapter" data-level="6.3" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html"><i class="fa fa-check"></i><b>6.3</b> Basics of <code>ggplot</code></a><ul>
<li class="chapter" data-level="6.3.1" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#incrementally-composition-of-a-plot"><i class="fa fa-check"></i><b>6.3.1</b> Incrementally composition of a plot</a></li>
<li class="chapter" data-level="6.3.2" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#elements-in-the-layered-grammar-of-graphs"><i class="fa fa-check"></i><b>6.3.2</b> Elements in the layered grammar of graphs</a></li>
<li class="chapter" data-level="6.3.3" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#layers-and-groups"><i class="fa fa-check"></i><b>6.3.3</b> Layers and groups</a></li>
<li class="chapter" data-level="6.3.4" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#grouping"><i class="fa fa-check"></i><b>6.3.4</b> Grouping</a></li>
<li class="chapter" data-level="6.3.5" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#example-of-a-customized-plot"><i class="fa fa-check"></i><b>6.3.5</b> Example of a customized plot</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html"><i class="fa fa-check"></i><b>6.4</b> A rendezvous with popular geoms</a><ul>
<li class="chapter" data-level="6.4.1" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#scatter-plots-with-geom_point"><i class="fa fa-check"></i><b>6.4.1</b> Scatter plots with <code>geom_point</code></a></li>
<li class="chapter" data-level="6.4.2" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#smooth"><i class="fa fa-check"></i><b>6.4.2</b> Smooth</a></li>
<li class="chapter" data-level="6.4.3" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#line"><i class="fa fa-check"></i><b>6.4.3</b> Line</a></li>
<li class="chapter" data-level="6.4.4" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#barplot"><i class="fa fa-check"></i><b>6.4.4</b> Barplot</a></li>
<li class="chapter" data-level="6.4.5" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#plotting-distributions-histograms-boxplots-densities-and-violins"><i class="fa fa-check"></i><b>6.4.5</b> Plotting distributions: histograms, boxplots, densities and violins</a></li>
<li class="chapter" data-level="6.4.6" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#rugs"><i class="fa fa-check"></i><b>6.4.6</b> Rugs</a></li>
<li class="chapter" data-level="6.4.7" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#annotation"><i class="fa fa-check"></i><b>6.4.7</b> Annotation</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="Chap-02-04-faceting.html"><a href="Chap-02-04-faceting.html"><i class="fa fa-check"></i><b>6.5</b> Faceting</a></li>
<li class="chapter" data-level="6.6" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html"><i class="fa fa-check"></i><b>6.6</b> Customization etc.</a><ul>
<li class="chapter" data-level="6.6.1" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#themes"><i class="fa fa-check"></i><b>6.6.1</b> Themes</a></li>
<li class="chapter" data-level="6.6.2" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#guides"><i class="fa fa-check"></i><b>6.6.2</b> Guides</a></li>
<li class="chapter" data-level="6.6.3" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#axes-ticks-and-tick-labels"><i class="fa fa-check"></i><b>6.6.3</b> Axes, ticks and tick labels</a></li>
<li class="chapter" data-level="6.6.4" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#labels"><i class="fa fa-check"></i><b>6.6.4</b> Labels</a></li>
<li class="chapter" data-level="6.6.5" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#combining-arranging-plots"><i class="fa fa-check"></i><b>6.6.5</b> Combining &amp; arranging plots</a></li>
<li class="chapter" data-level="6.6.6" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#latex-expressions-in-plot-labels"><i class="fa fa-check"></i><b>6.6.6</b> LaTeX expressions in plot labels</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Models and inferences</b></span></li>
<li class="chapter" data-level="7" data-path="Chap-03-01-probability.html"><a href="Chap-03-01-probability.html"><i class="fa fa-check"></i><b>7</b> Basics of Probability Theory</a><ul>
<li class="chapter" data-level="7.1" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html"><i class="fa fa-check"></i><b>7.1</b> Probability</a><ul>
<li class="chapter" data-level="7.1.1" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html#outcomes-events-observations"><i class="fa fa-check"></i><b>7.1.1</b> Outcomes, events, observations</a></li>
<li class="chapter" data-level="7.1.2" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html#probability-distributions"><i class="fa fa-check"></i><b>7.1.2</b> Probability distributions</a></li>
<li class="chapter" data-level="7.1.3" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html#interpretations-of-probability"><i class="fa fa-check"></i><b>7.1.3</b> Interpretations of probability</a></li>
<li class="chapter" data-level="7.1.4" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html#distributions-as-samples"><i class="fa fa-check"></i><b>7.1.4</b> Distributions as samples</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="Chap-03-01-probability-marginal.html"><a href="Chap-03-01-probability-marginal.html"><i class="fa fa-check"></i><b>7.2</b> Structured events &amp; marginal distributions</a><ul>
<li class="chapter" data-level="7.2.1" data-path="Chap-03-01-probability-marginal.html"><a href="Chap-03-01-probability-marginal.html#probability-table-for-a-flip-and-draw-scenario"><i class="fa fa-check"></i><b>7.2.1</b> Probability table for a flip-and-draw scenario</a></li>
<li class="chapter" data-level="7.2.2" data-path="Chap-03-01-probability-marginal.html"><a href="Chap-03-01-probability-marginal.html#structured-events-and-joint-probability-distributions"><i class="fa fa-check"></i><b>7.2.2</b> Structured events and joint-probability distributions</a></li>
<li class="chapter" data-level="7.2.3" data-path="Chap-03-01-probability-marginal.html"><a href="Chap-03-01-probability-marginal.html#marginalization"><i class="fa fa-check"></i><b>7.2.3</b> Marginalization</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="Chap-03-01-probability-conditional.html"><a href="Chap-03-01-probability-conditional.html"><i class="fa fa-check"></i><b>7.3</b> Conditional probability</a><ul>
<li class="chapter" data-level="7.3.1" data-path="Chap-03-01-probability-conditional.html"><a href="Chap-03-01-probability-conditional.html#bayes-rule"><i class="fa fa-check"></i><b>7.3.1</b> Bayes rule</a></li>
<li class="chapter" data-level="7.3.2" data-path="Chap-03-01-probability-conditional.html"><a href="Chap-03-01-probability-conditional.html#Chap-03-01-probability-independence"><i class="fa fa-check"></i><b>7.3.2</b> Stochastic (in-)dependence</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html"><i class="fa fa-check"></i><b>7.4</b> Random variables</a><ul>
<li class="chapter" data-level="7.4.1" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html#notation-terminology"><i class="fa fa-check"></i><b>7.4.1</b> Notation &amp; terminology</a></li>
<li class="chapter" data-level="7.4.2" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html#cumulative-distribution-functions-mass-density"><i class="fa fa-check"></i><b>7.4.2</b> Cumulative distribution functions, mass &amp; density</a></li>
<li class="chapter" data-level="7.4.3" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html#expected-value-variance"><i class="fa fa-check"></i><b>7.4.3</b> Expected value &amp; variance</a></li>
<li class="chapter" data-level="7.4.4" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html#composite-random-variables"><i class="fa fa-check"></i><b>7.4.4</b> Composite random variables</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="Chap-03-01-probability-R.html"><a href="Chap-03-01-probability-R.html"><i class="fa fa-check"></i><b>7.5</b> Probability distributions in R</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Data Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Chap-02-02-data-preprocessing-cleaning" class="section level2">
<h2><span class="header-section-number">4.3</span> Data manipulation: the basics</h2>
<div id="pivoting" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Pivoting</h3>
<p>The tidyverse strongly encourages the use of tidy data, or at least almost tidy data. If your data is (almost) tidy, you can be reasonably sure that you can plot and analyze the data without additional wrangling. If your data is not (almost) tidy because it is too wide or too long (see below), what is required is a joyful round of pivoting. There are two directions of pivoting: making data longer, and making data wider.</p>
<div id="making-too-wide-data-longer-with-pivot_longer" class="section level4">
<h4><span class="header-section-number">4.3.1.1</span> Making too wide data longer with <code>pivot_longer</code></h4>
<p>Consider the previous example of messy data again:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" data-line-number="1">exam_results_visual &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb163-2" data-line-number="2">  <span class="op">~</span>exam,       <span class="op">~</span><span class="st">&quot;Rozz&quot;</span>,   <span class="op">~</span><span class="st">&quot;Andrew&quot;</span>,   <span class="op">~</span><span class="st">&quot;Siouxsie&quot;</span>,</a>
<a class="sourceLine" id="cb163-3" data-line-number="3">  <span class="st">&quot;midterm&quot;</span>,   <span class="st">&quot;1.3&quot;</span>,     <span class="st">&quot;2.0&quot;</span>,       <span class="st">&quot;1.7&quot;</span>,</a>
<a class="sourceLine" id="cb163-4" data-line-number="4">  <span class="st">&quot;final&quot;</span>  ,   <span class="st">&quot;2.3&quot;</span>,     <span class="st">&quot;1.7&quot;</span>,       <span class="st">&quot;1.0&quot;</span></a>
<a class="sourceLine" id="cb163-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb163-6" data-line-number="6">exam_results_visual</a></code></pre></div>
<pre><code>## # A tibble: 2 x 4
##   exam    Rozz  Andrew Siouxsie
##   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   
## 1 midterm 1.3   2.0    1.7     
## 2 final   2.3   1.7    1.0</code></pre>
<p>This data is “too wide”. We can make it longer with the function <code>pivot_longer</code> from the <code>tidyr</code> package. Check out the example below before we plunge into a description of <code>pivot_longer</code>.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" data-line-number="1">exam_results_visual <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb165-2" data-line-number="2"><span class="st">  </span><span class="kw">pivot_longer</span>(</a>
<a class="sourceLine" id="cb165-3" data-line-number="3">    <span class="co"># pivot every column except the first </span></a>
<a class="sourceLine" id="cb165-4" data-line-number="4">    <span class="dt">cols =</span> <span class="op">-</span><span class="st"> </span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb165-5" data-line-number="5">    <span class="co"># name of new column which contains the</span></a>
<a class="sourceLine" id="cb165-6" data-line-number="6">    <span class="co"># names of the columns to be &quot;gathered&quot;</span></a>
<a class="sourceLine" id="cb165-7" data-line-number="7">    <span class="dt">names_to =</span> <span class="st">&quot;student&quot;</span>,</a>
<a class="sourceLine" id="cb165-8" data-line-number="8">    <span class="co"># name of new column which contains the values</span></a>
<a class="sourceLine" id="cb165-9" data-line-number="9">    <span class="co"># of the cells which now form a new column</span></a>
<a class="sourceLine" id="cb165-10" data-line-number="10">    <span class="dt">values_to =</span> <span class="st">&quot;grade&quot;</span></a>
<a class="sourceLine" id="cb165-11" data-line-number="11">  ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb165-12" data-line-number="12"><span class="st">  </span><span class="co"># optional reordering of columns (to make </span></a>
<a class="sourceLine" id="cb165-13" data-line-number="13"><span class="st">  </span><span class="co"># the output exactly like `exam_results_tidy`)</span></a>
<a class="sourceLine" id="cb165-14" data-line-number="14"><span class="st">  </span><span class="kw">select</span>(student, exam, grade)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   student  exam    grade
##   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;
## 1 Rozz     midterm 1.3  
## 2 Andrew   midterm 2.0  
## 3 Siouxsie midterm 1.7  
## 4 Rozz     final   2.3  
## 5 Andrew   final   1.7  
## 6 Siouxsie final   1.0</code></pre>
<p>What <code>pivot_longer</code> does, in general, is take a bunch of columns and gather the values of all cells in these columns into a single, new column, the so-called <em>value column</em>, i.e., the column with the values of the cells to be gathered. If <code>pivot_longer</code> stopped here, we would loose information about which cell values belonged to which original column. Therefore, <code>pivot_longer</code> also creates a second new column, the so-called <em>name column</em>, i.e., the column with the names of the original columns that we gathered together. Consequently, in order to do its job, <code>pivot_longer</code> minimally needs three pieces of information:<a href="#fn15" class="footnote-ref" id="fnref15"><sup>15</sup></a></p>
<ol style="list-style-type: decimal">
<li>which columns to spin around (function argument <code>cols</code>)</li>
<li>the name of the to-be-created new value column (function argument <code>values_to</code>)</li>
<li>the name of the to-be-created new name column (function argument <code>names_to</code>)</li>
</ol>
<p>For different ways of selecting columns to pivot around, see Section <a href="Chap-02-02-data-preprocessing-cleaning.html#Chap-02-02-tidy-selection">4.3.3</a> below.</p>
</div>
<div id="making-too-long-data-wider-with-pivot_wider" class="section level4">
<h4><span class="header-section-number">4.3.1.2</span> Making too long data wider with <code>pivot_wider</code></h4>
<p>Consider the following example of data which is untidy because it is too long:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb167-1" data-line-number="1">mixed_results_too_long &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb167-2" data-line-number="2"><span class="st">  </span><span class="kw">tibble</span>(<span class="dt">student =</span> <span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&#39;Rozz&#39;</span>, <span class="st">&#39;Andrew&#39;</span>, <span class="st">&#39;Siouxsie&#39;</span>), <span class="dt">times =</span> <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb167-3" data-line-number="3">         <span class="dt">what =</span>    <span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&#39;grade&#39;</span>, <span class="st">&#39;participation&#39;</span>), <span class="dt">each =</span> <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb167-4" data-line-number="4">         <span class="dt">howmuch =</span> <span class="kw">c</span>(<span class="fl">2.7</span>, <span class="fl">2.0</span>, <span class="fl">1.0</span>, <span class="dv">75</span>, <span class="dv">93</span>, <span class="dv">33</span>))</a>
<a class="sourceLine" id="cb167-5" data-line-number="5">mixed_results_too_long</a></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   student  what          howmuch
##   &lt;chr&gt;    &lt;chr&gt;           &lt;dbl&gt;
## 1 Rozz     grade             2.7
## 2 Andrew   grade             2  
## 3 Siouxsie grade             1  
## 4 Rozz     participation    75  
## 5 Andrew   participation    93  
## 6 Siouxsie participation    33</code></pre>
<p>This data is untidy because it lumps two types of different measurements (a course grade, and the percentage of participation) in a single column. These are different variables, and so should be represented in different columns.</p>
<p>To fix a data representation that is too long, we can make it wider with the help of the <code>pivot_wider</code> function from the <code>tidyr</code> package. We look at an example before looking at the general behavior of the <code>pivot_wider</code> function.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb169-1" data-line-number="1">mixed_results_too_long <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb169-2" data-line-number="2"><span class="st">  </span><span class="kw">pivot_wider</span>(</a>
<a class="sourceLine" id="cb169-3" data-line-number="3">    <span class="co"># column containing the names of the new columns</span></a>
<a class="sourceLine" id="cb169-4" data-line-number="4">    <span class="dt">names_from =</span> what,</a>
<a class="sourceLine" id="cb169-5" data-line-number="5">    <span class="co"># column containing the values of the new columns</span></a>
<a class="sourceLine" id="cb169-6" data-line-number="6">    <span class="dt">values_from =</span> howmuch</a>
<a class="sourceLine" id="cb169-7" data-line-number="7">  )</a></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   student  grade participation
##   &lt;chr&gt;    &lt;dbl&gt;         &lt;dbl&gt;
## 1 Rozz       2.7            75
## 2 Andrew     2              93
## 3 Siouxsie   1              33</code></pre>
<p>In general, <code>pivot_wider</code> picks out two columns, one column of values to distribute into new to-be-created columns, and one vector of names or groups which contains the information about the, well, names of the to-be-created new columns. There are more refined options for <code>pivot_wider</code> some of which we will encounter in the context of concrete cases of application.</p>
</div>
</div>
<div id="subsetting-row-columns" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Subsetting row &amp; columns</h3>
<p>If a data set contains too much information for your current purposes, you can discard irrelevant (or unhelpful) rows and columns. The function <code>filter</code> takes a Boolean expression and returns only those rows of which the Boolean expression is true:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" data-line-number="1">exam_results_tidy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb171-2" data-line-number="2"><span class="st">  </span><span class="co"># keep only entries with grades better than 1.7</span></a>
<a class="sourceLine" id="cb171-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(grade <span class="op">&lt;=</span><span class="st"> </span><span class="fl">1.7</span>)</a></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   student  exam    grade
##   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;
## 1 Rozz     midterm   1.3
## 2 Siouxsie midterm   1.7
## 3 Andrew   final     1.7
## 4 Siouxsie final     1</code></pre>
<p>To select rows by an index or a vector of indeces, use the <code>slice</code> function:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb173-1" data-line-number="1">exam_results_tidy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb173-2" data-line-number="2"><span class="st">  </span><span class="co"># keep only entries from rows with an even index</span></a>
<a class="sourceLine" id="cb173-3" data-line-number="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">slice</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>)) <span class="co"># explicit call to avoid name clash (package &#39;greta&#39;)</span></a></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   student  exam    grade
##   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;
## 1 Andrew   midterm   2  
## 2 Rozz     final     2.3
## 3 Siouxsie final     1</code></pre>
<p>The function <code>select</code> allows to pick out a subset of columns. Interestingly, it can also be used to reorder columns, because the order in which column names are specified matches the order in the returned tibble.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" data-line-number="1">exam_results_tidy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb175-2" data-line-number="2"><span class="st">  </span><span class="co"># select columns `grade` and `name`</span></a>
<a class="sourceLine" id="cb175-3" data-line-number="3"><span class="st">  </span><span class="kw">select</span>(grade, exam)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   grade exam   
##   &lt;dbl&gt; &lt;chr&gt;  
## 1   1.3 midterm
## 2   2   midterm
## 3   1.7 midterm
## 4   2.3 final  
## 5   1.7 final  
## 6   1   final</code></pre>
</div>
<div id="Chap-02-02-tidy-selection" class="section level3">
<h3><span class="header-section-number">4.3.3</span> Tidy selection of column names</h3>
<p>To select the colums in several functions within the tidyverse, such as <code>pivot_longer</code> or <code>select</code>, there are useful helper functions from the <code>tidyselect</code> package. Here are some examples:<a href="#fn16" class="footnote-ref" id="fnref16"><sup>16</sup></a></p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb177-1" data-line-number="1"><span class="co"># bogus code for illustration of possibilities!</span></a>
<a class="sourceLine" id="cb177-2" data-line-number="2">SOME_DATA <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb177-3" data-line-number="3"><span class="st">  </span><span class="kw">select</span>( ... <span class="co"># could be one of the following</span></a>
<a class="sourceLine" id="cb177-4" data-line-number="4">        <span class="co"># all columns indexed 2, 3, ..., 10</span></a>
<a class="sourceLine" id="cb177-5" data-line-number="5">        <span class="dv">2</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb177-6" data-line-number="6">        <span class="co"># all columns except the one called &quot;COLNAME&quot;</span></a>
<a class="sourceLine" id="cb177-7" data-line-number="7">        <span class="op">-</span><span class="st"> </span>COLNAME</a>
<a class="sourceLine" id="cb177-8" data-line-number="8">        <span class="co"># all columns with names starting with &quot;STRING&quot;</span></a>
<a class="sourceLine" id="cb177-9" data-line-number="9">       ... <span class="kw">starts_with</span>(<span class="st">&quot;STRING&quot;</span>)</a>
<a class="sourceLine" id="cb177-10" data-line-number="10">       <span class="co"># all columns with names ending with &quot;STRING&quot;</span></a>
<a class="sourceLine" id="cb177-11" data-line-number="11">       ... <span class="kw">ends_with</span>(<span class="st">&quot;STRING&quot;</span>)</a>
<a class="sourceLine" id="cb177-12" data-line-number="12">       <span class="co"># all columns with names containing &quot;STRING&quot;</span></a>
<a class="sourceLine" id="cb177-13" data-line-number="13">       ... <span class="kw">contains</span>(<span class="st">&quot;STRING&quot;</span>)</a>
<a class="sourceLine" id="cb177-14" data-line-number="14">       <span class="co"># all columns with names of the form &quot;Col_i&quot; with i = 1, ..., 10</span></a>
<a class="sourceLine" id="cb177-15" data-line-number="15">       ... <span class="kw">num_range</span>(<span class="st">&quot;Col_&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb177-16" data-line-number="16">  )</a></code></pre></div>
</div>
<div id="adding-changing-and-renaming-columns" class="section level3">
<h3><span class="header-section-number">4.3.4</span> Adding, changing and renaming columns</h3>
<p>To add a new column, or to change an existing one use function <code>mutate</code>, like so:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb178-1" data-line-number="1">exam_results_tidy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb178-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb178-3" data-line-number="3">    <span class="co"># add a new column called &#39;passed&#39; depending on grade</span></a>
<a class="sourceLine" id="cb178-4" data-line-number="4">    <span class="co"># [NB: severe passing conditions in this class!!]</span></a>
<a class="sourceLine" id="cb178-5" data-line-number="5">    <span class="dt">passed =</span> grade <span class="op">&lt;=</span><span class="st"> </span><span class="fl">1.7</span>, </a>
<a class="sourceLine" id="cb178-6" data-line-number="6">    <span class="co"># change an existing column; here: change</span></a>
<a class="sourceLine" id="cb178-7" data-line-number="7">    <span class="co"># character column &#39;exam&#39; to ordered factor</span></a>
<a class="sourceLine" id="cb178-8" data-line-number="8">    <span class="dt">exam =</span> <span class="kw">factor</span>(exam, <span class="dt">ordered =</span> T)</a>
<a class="sourceLine" id="cb178-9" data-line-number="9">  )</a></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   student  exam    grade passed
##   &lt;chr&gt;    &lt;ord&gt;   &lt;dbl&gt; &lt;lgl&gt; 
## 1 Rozz     midterm   1.3 TRUE  
## 2 Andrew   midterm   2   FALSE 
## 3 Siouxsie midterm   1.7 TRUE  
## 4 Rozz     final     2.3 FALSE 
## 5 Andrew   final     1.7 TRUE  
## 6 Siouxsie final     1   TRUE</code></pre>
<p>If you want to rename a column, function <code>rename</code> is what you want:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" data-line-number="1">exam_results_tidy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb180-2" data-line-number="2"><span class="st">  </span><span class="co"># rename existing colum &quot;student&quot; to new name &quot;participant&quot;</span></a>
<a class="sourceLine" id="cb180-3" data-line-number="3"><span class="st">  </span><span class="co"># [NB: rename takes the new name first]</span></a>
<a class="sourceLine" id="cb180-4" data-line-number="4"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">participant =</span> student)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   participant exam    grade
##   &lt;chr&gt;       &lt;chr&gt;   &lt;dbl&gt;
## 1 Rozz        midterm   1.3
## 2 Andrew      midterm   2  
## 3 Siouxsie    midterm   1.7
## 4 Rozz        final     2.3
## 5 Andrew      final     1.7
## 6 Siouxsie    final     1</code></pre>
</div>
<div id="splitting-and-uniting-columns" class="section level3">
<h3><span class="header-section-number">4.3.5</span> Splitting and uniting columns</h3>
<p>Here is data from course homework:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb182-1" data-line-number="1">homework_results_untidy &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb182-2" data-line-number="2"><span class="st">  </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb182-3" data-line-number="3">    <span class="op">~</span>student,      <span class="op">~</span>results,</a>
<a class="sourceLine" id="cb182-4" data-line-number="4">    <span class="st">&quot;Rozz&quot;</span>,        <span class="st">&quot;1.0,2.3,3.0&quot;</span>,</a>
<a class="sourceLine" id="cb182-5" data-line-number="5">    <span class="st">&quot;Andrew&quot;</span>,      <span class="st">&quot;2.3,2.7,1.3&quot;</span>,</a>
<a class="sourceLine" id="cb182-6" data-line-number="6">    <span class="st">&quot;Siouxsie&quot;</span>,    <span class="st">&quot;1.7,4.0,1.0&quot;</span></a>
<a class="sourceLine" id="cb182-7" data-line-number="7">  )</a></code></pre></div>
<p>This is not a useful representation format. Results of three homework sets are mushed together in a single column. Each value is separated by a comma, but it is all stored as a character vector.</p>
<p>To disentangle information in a single column, use the <code>separate</code> function:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb183-1" data-line-number="1">homework_results_untidy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb183-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(</a>
<a class="sourceLine" id="cb183-3" data-line-number="3">    <span class="co"># which column to split up</span></a>
<a class="sourceLine" id="cb183-4" data-line-number="4">    <span class="dt">col =</span> results,</a>
<a class="sourceLine" id="cb183-5" data-line-number="5">    <span class="co"># names of the new column to store results</span></a>
<a class="sourceLine" id="cb183-6" data-line-number="6">    <span class="dt">into =</span> <span class="kw">str_c</span>(<span class="st">&quot;HW_&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>),</a>
<a class="sourceLine" id="cb183-7" data-line-number="7">    <span class="co"># separate by which character / reg-exp</span></a>
<a class="sourceLine" id="cb183-8" data-line-number="8">    <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>,</a>
<a class="sourceLine" id="cb183-9" data-line-number="9">    <span class="co"># automatically (smart-)convert the type of the new cols</span></a>
<a class="sourceLine" id="cb183-10" data-line-number="10">    <span class="dt">convert =</span> T </a>
<a class="sourceLine" id="cb183-11" data-line-number="11">    )</a></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   student   HW_1  HW_2  HW_3
##   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Rozz       1     2.3   3  
## 2 Andrew     2.3   2.7   1.3
## 3 Siouxsie   1.7   4     1</code></pre>
<p>If you have a reason to perform the reverse operation, i.e., join together several columns, use the <code>unite</code> function.</p>
</div>
<div id="sorting-a-data-set" class="section level3">
<h3><span class="header-section-number">4.3.6</span> Sorting a data set</h3>
<p>If you want to indicate a fixed order of the reoccurring elements in a (character) vector, e.g., for plotting in a particular order, you should make this column an ordered factor. But if you want to order a data set along a column, e.g., for inspection or printing as a table, then you can do that by using the <code>arrange</code> function. You can specify several columns to sort alpha-numerically in ascending order, and also indicate a descending order using the <code>desc</code> function:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb185-1" data-line-number="1">exam_results_tidy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb185-2" data-line-number="2"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(student), grade)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   student  exam    grade
##   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;
## 1 Siouxsie final     1  
## 2 Siouxsie midterm   1.7
## 3 Rozz     midterm   1.3
## 4 Rozz     final     2.3
## 5 Andrew   final     1.7
## 6 Andrew   midterm   2</code></pre>
</div>
<div id="combining-tibbles" class="section level3">
<h3><span class="header-section-number">4.3.7</span> Combining tibbles</h3>
<p>There are frequently occasions on which data from two separate variables needs to be combined. The simplest case is where two entirely disjoint data sets merely need to be glued together, either horizontally (binding columns together with function <code>cbind</code>) or vertically (binding rows together with function <code>rbind</code>).</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb187-1" data-line-number="1">new_exam_results_tidy &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb187-2" data-line-number="2">  <span class="op">~</span>student,    <span class="op">~</span>exam,      <span class="op">~</span>grade,</a>
<a class="sourceLine" id="cb187-3" data-line-number="3">  <span class="st">&quot;Rozz&quot;</span>,      <span class="st">&quot;bonus&quot;</span>,  <span class="fl">1.7</span>,</a>
<a class="sourceLine" id="cb187-4" data-line-number="4">  <span class="st">&quot;Andrew&quot;</span>,    <span class="st">&quot;bonus&quot;</span>,  <span class="fl">2.3</span>,</a>
<a class="sourceLine" id="cb187-5" data-line-number="5">  <span class="st">&quot;Siouxsie&quot;</span>,  <span class="st">&quot;bonus&quot;</span>,  <span class="fl">1.0</span></a>
<a class="sourceLine" id="cb187-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb187-7" data-line-number="7"><span class="kw">rbind</span>(</a>
<a class="sourceLine" id="cb187-8" data-line-number="8">  exam_results_tidy, </a>
<a class="sourceLine" id="cb187-9" data-line-number="9">  new_exam_results_tidy</a>
<a class="sourceLine" id="cb187-10" data-line-number="10">)</a></code></pre></div>
<pre><code>## # A tibble: 9 x 3
##   student  exam    grade
##   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;
## 1 Rozz     midterm   1.3
## 2 Andrew   midterm   2  
## 3 Siouxsie midterm   1.7
## 4 Rozz     final     2.3
## 5 Andrew   final     1.7
## 6 Siouxsie final     1  
## 7 Rozz     bonus     1.7
## 8 Andrew   bonus     2.3
## 9 Siouxsie bonus     1</code></pre>
<p>If two data sets have information in common, and the combination should respect that commonality, the <code>join</code> family of functions is of great help. Consider the case of distributed information again that we looked at to understand the third constraint of the concept of “tidy data”. There are two tibbles, both of which contain information about the same students. They share the column <code>student</code> (this does not necessarily have to be in the same order!) and we might want to join the information from both sources into a single (messy but almost tidy) representation, using <code>full_join</code>. We have seen an example already, which is repeated here:</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb189-1" data-line-number="1"><span class="co"># same as before</span></a>
<a class="sourceLine" id="cb189-2" data-line-number="2">exam_results_tidy &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb189-3" data-line-number="3">  <span class="op">~</span>student,    <span class="op">~</span>exam,      <span class="op">~</span>grade,</a>
<a class="sourceLine" id="cb189-4" data-line-number="4">  <span class="st">&quot;Rozz&quot;</span>,      <span class="st">&quot;midterm&quot;</span>,  <span class="fl">1.3</span>,</a>
<a class="sourceLine" id="cb189-5" data-line-number="5">  <span class="st">&quot;Andrew&quot;</span>,    <span class="st">&quot;midterm&quot;</span>,  <span class="fl">2.0</span>,</a>
<a class="sourceLine" id="cb189-6" data-line-number="6">  <span class="st">&quot;Siouxsie&quot;</span>,  <span class="st">&quot;midterm&quot;</span>,  <span class="fl">1.7</span>,</a>
<a class="sourceLine" id="cb189-7" data-line-number="7">  <span class="st">&quot;Rozz&quot;</span>,      <span class="st">&quot;final&quot;</span>,    <span class="fl">2.3</span>,</a>
<a class="sourceLine" id="cb189-8" data-line-number="8">  <span class="st">&quot;Andrew&quot;</span>,    <span class="st">&quot;final&quot;</span>,    <span class="fl">1.7</span>,</a>
<a class="sourceLine" id="cb189-9" data-line-number="9">  <span class="st">&quot;Siouxsie&quot;</span>,  <span class="st">&quot;final&quot;</span>,    <span class="fl">1.0</span></a>
<a class="sourceLine" id="cb189-10" data-line-number="10">)</a>
<a class="sourceLine" id="cb189-11" data-line-number="11"><span class="co"># additional table with student numbers</span></a>
<a class="sourceLine" id="cb189-12" data-line-number="12">student_numbers &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb189-13" data-line-number="13">  <span class="op">~</span>student,    <span class="op">~</span>student_number,</a>
<a class="sourceLine" id="cb189-14" data-line-number="14">  <span class="st">&quot;Rozz&quot;</span>,      <span class="st">&quot;666&quot;</span>,   </a>
<a class="sourceLine" id="cb189-15" data-line-number="15">  <span class="st">&quot;Andrew&quot;</span>,    <span class="st">&quot;1969&quot;</span>,</a>
<a class="sourceLine" id="cb189-16" data-line-number="16">  <span class="st">&quot;Siouxsie&quot;</span>,  <span class="st">&quot;3.14&quot;</span></a>
<a class="sourceLine" id="cb189-17" data-line-number="17">)</a>
<a class="sourceLine" id="cb189-18" data-line-number="18"><span class="kw">full_join</span>(exam_results_tidy, student_numbers, <span class="dt">by =</span> <span class="st">&quot;student&quot;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   student  exam    grade student_number
##   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;         
## 1 Rozz     midterm   1.3 666           
## 2 Andrew   midterm   2   1969          
## 3 Siouxsie midterm   1.7 3.14          
## 4 Rozz     final     2.3 666           
## 5 Andrew   final     1.7 1969          
## 6 Siouxsie final     1   3.14</code></pre>
<div class="exercises">
<p><strong>Exercise E.2: Data Wrangling in R</strong></p>
<p>We are working with the same example as in the earlier exercise:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb191-1" data-line-number="1">data &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb191-2" data-line-number="2"><span class="op">~</span>subject_id,  <span class="op">~</span>choices,  <span class="op">~</span>reaction_times, </a>
<a class="sourceLine" id="cb191-3" data-line-number="3"><span class="dv">1</span>,            <span class="st">&quot;A,B,B&quot;</span>,   <span class="st">&quot;312 433 365&quot;</span>, </a>
<a class="sourceLine" id="cb191-4" data-line-number="4"><span class="dv">2</span>,            <span class="st">&quot;B,A,B&quot;</span>,   <span class="st">&quot;393 491 327&quot;</span>,</a>
<a class="sourceLine" id="cb191-5" data-line-number="5"> <span class="dv">3</span>,            <span class="st">&quot;B,A,A&quot;</span>,   <span class="st">&quot;356 313 475&quot;</span>, </a>
<a class="sourceLine" id="cb191-6" data-line-number="6"> <span class="dv">4</span>,            <span class="st">&quot;A,B,B&quot;</span>,   <span class="st">&quot;292 352 378&quot;</span> </a>
<a class="sourceLine" id="cb191-7" data-line-number="7">)</a></code></pre></div>
<p>Take a look at the following code snippet. Explain what the individual parts (indicated by the numbers) do. What will the result look like?</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb192-1" data-line-number="1">choice_data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb192-2" data-line-number="2"><span class="co">#1 </span></a>
<a class="sourceLine" id="cb192-3" data-line-number="3"><span class="kw">select</span>(subject_id,choices) <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb192-4" data-line-number="4"><span class="co">#2 </span></a>
<a class="sourceLine" id="cb192-5" data-line-number="5"><span class="st">  </span><span class="kw">separate</span>( </a>
<a class="sourceLine" id="cb192-6" data-line-number="6">   <span class="dt">col =</span> choices,  </a>
<a class="sourceLine" id="cb192-7" data-line-number="7">  <span class="dt">into =</span> <span class="kw">str_c</span>(<span class="st">&quot;C_&quot;</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>),  </a>
<a class="sourceLine" id="cb192-8" data-line-number="8">    <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>) <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb192-9" data-line-number="9"><span class="co">#3 </span></a>
<a class="sourceLine" id="cb192-10" data-line-number="10"><span class="st">  </span><span class="kw">pivot_longer</span>( </a>
<a class="sourceLine" id="cb192-11" data-line-number="11">  <span class="dt">cols =</span> <span class="dv">-1</span>, </a>
<a class="sourceLine" id="cb192-12" data-line-number="12">    <span class="dt">names_to =</span><span class="st">&quot;condition&quot;</span>,  </a>
<a class="sourceLine" id="cb192-13" data-line-number="13">   <span class="dt">values_to =</span> <span class="st">&quot;response&quot;</span>)</a></code></pre></div>
<div class="collapsibleSolution">
<button class="trigger">
Solution
</button>
<div class="content">
<ol style="list-style-type: decimal">
<li><p>Selecting two columns (subject_id and choices) out of the data set.</p></li>
<li>In the data set, each cell in the choices column contains more than one value. To separate them, we take this column and divide the strings by the “,”. The names are then given for each line from one to three.</li>
<li><p>Now we are making the data set longer, so that each condition is its own row. We are pivoting each column apart from the first. The names of the columns are combined in a column called condition and the values are put into a column called response.</p></li>
</ol>
<p>The result:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb193-1" data-line-number="1">choice_data</a></code></pre></div>
<pre><code>## # A tibble: 12 x 3
##    subject_id condition response
##         &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;   
##  1          1 C_1       A       
##  2          1 C_2       B       
##  3          1 C_3       B       
##  4          2 C_1       B       
##  5          2 C_2       A       
##  6          2 C_3       B       
##  7          3 C_1       B       
##  8          3 C_2       A       
##  9          3 C_3       A       
## 10          4 C_1       A       
## 11          4 C_2       B       
## 12          4 C_3       B</code></pre>
</div>
</div>
</div>
<p>If two data sets are to be joined by a column that is not exactly shared by both sets (one contains entries in this columns that the other doesn’t) then a <code>full_join</code> will retain all information from both. If that is not what you want, check out alternative functions like <code>right_join</code>, <code>semi_join</code> etc. using the <a href="https://rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">data wrangling cheat sheet</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="15">
<li id="fn15"><p>There are alternative possibilities for specifying names of the value and name column, which allow for more dynamic construction of strings. We will not cover all of these details here, but we will use some of these alternative specifications in subsequent examples.<a href="Chap-02-02-data-preprocessing-cleaning.html#fnref15" class="footnote-back">↩</a></p></li>
<li id="fn16"><p>The helpers from the <code>tidyselect</code> package also accept regular expressions.<a href="Chap-02-02-data-preprocessing-cleaning.html#fnref16" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Chap-02-02-data-tidy-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Chap-02-02-data-grouping-nesting.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["I2DA.epub", "I2DA.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
