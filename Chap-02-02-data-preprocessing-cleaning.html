<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4.3 Data manipulation: the basics | An Introduction to Data Analysis</title>
  <meta name="description" content="Introductory text for statistics and data analysis (using R)" />
  <meta name="generator" content="bookdown 0.24.1 and GitBook 2.6.7" />

  <meta property="og:title" content="4.3 Data manipulation: the basics | An Introduction to Data Analysis" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Introductory text for statistics and data analysis (using R)" />
  <meta name="github-repo" content="MarauderPixie/intro-data-analysis" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4.3 Data manipulation: the basics | An Introduction to Data Analysis" />
  
  <meta name="twitter:description" content="Introductory text for statistics and data analysis (using R)" />
  

<meta name="author" content="Michael Franke" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Chap-02-02-data-tidy-data.html"/>
<link rel="next" href="Chap-02-02-data-grouping-nesting.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#section"></a></li>
<li class="part"><span><b>I Preliminaries</b></span></li>
<li class="chapter" data-level="1" data-path="general-introduction.html"><a href="general-introduction.html"><i class="fa fa-check"></i><b>1</b> General Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="Chap-01-00-intro-learning-goals.html"><a href="Chap-01-00-intro-learning-goals.html"><i class="fa fa-check"></i><b>1.1</b> Learning goals</a></li>
<li class="chapter" data-level="1.2" data-path="Chap-01-00-intro-course-structure.html"><a href="Chap-01-00-intro-course-structure.html"><i class="fa fa-check"></i><b>1.2</b> Course structure</a></li>
<li class="chapter" data-level="1.3" data-path="Chap-01-00-intro-tools.html"><a href="Chap-01-00-intro-tools.html"><i class="fa fa-check"></i><b>1.3</b> Tools used in this course</a></li>
<li class="chapter" data-level="1.4" data-path="Chap-01-00-intro-topics.html"><a href="Chap-01-00-intro-topics.html"><i class="fa fa-check"></i><b>1.4</b> Topics covered (and not covered) in the course</a></li>
<li class="chapter" data-level="1.5" data-path="Chap-01-00-intro-data-sets.html"><a href="Chap-01-00-intro-data-sets.html"><i class="fa fa-check"></i><b>1.5</b> Data sets covered</a></li>
<li class="chapter" data-level="1.6" data-path="Chap-01-00-intro-installation.html"><a href="Chap-01-00-intro-installation.html"><i class="fa fa-check"></i><b>1.6</b> Installation</a></li>
<li class="chapter" data-level="1.7" data-path="Chap-01-00-intro-schedule.html"><a href="Chap-01-00-intro-schedule.html"><i class="fa fa-check"></i><b>1.7</b> Example schedule (12-week course)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Chap-01-01-R.html"><a href="Chap-01-01-R.html"><i class="fa fa-check"></i><b>2</b> Basics of R</a><ul>
<li class="chapter" data-level="2.1" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html"><i class="fa fa-check"></i><b>2.1</b> First steps</a><ul>
<li class="chapter" data-level="2.1.1" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#functions"><i class="fa fa-check"></i><b>2.1.1</b> Functions</a></li>
<li class="chapter" data-level="2.1.2" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#variables"><i class="fa fa-check"></i><b>2.1.2</b> Variables</a></li>
<li class="chapter" data-level="2.1.3" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#literate-coding"><i class="fa fa-check"></i><b>2.1.3</b> Literate coding</a></li>
<li class="chapter" data-level="2.1.4" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#objects"><i class="fa fa-check"></i><b>2.1.4</b> Objects</a></li>
<li class="chapter" data-level="2.1.5" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#packages"><i class="fa fa-check"></i><b>2.1.5</b> Packages</a></li>
<li class="chapter" data-level="2.1.6" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#Chap-01-01-R-help"><i class="fa fa-check"></i><b>2.1.6</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="ch1-data-types.html"><a href="ch1-data-types.html"><i class="fa fa-check"></i><b>2.2</b> Data types</a><ul>
<li class="chapter" data-level="2.2.1" data-path="ch1-data-types.html"><a href="ch1-data-types.html#numeric-vectors-matrices"><i class="fa fa-check"></i><b>2.2.1</b> Numeric vectors &amp; matrices</a></li>
<li class="chapter" data-level="2.2.2" data-path="ch1-data-types.html"><a href="ch1-data-types.html#booleans"><i class="fa fa-check"></i><b>2.2.2</b> Booleans</a></li>
<li class="chapter" data-level="2.2.3" data-path="ch1-data-types.html"><a href="ch1-data-types.html#special-values"><i class="fa fa-check"></i><b>2.2.3</b> Special values</a></li>
<li class="chapter" data-level="2.2.4" data-path="ch1-data-types.html"><a href="ch1-data-types.html#characters-strings"><i class="fa fa-check"></i><b>2.2.4</b> Characters (= strings)</a></li>
<li class="chapter" data-level="2.2.5" data-path="ch1-data-types.html"><a href="ch1-data-types.html#factors"><i class="fa fa-check"></i><b>2.2.5</b> Factors</a></li>
<li class="chapter" data-level="2.2.6" data-path="ch1-data-types.html"><a href="ch1-data-types.html#lists-data-frames-tibbles"><i class="fa fa-check"></i><b>2.2.6</b> Lists, data frames &amp; tibbles</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="Chap-01-01-functions.html"><a href="Chap-01-01-functions.html"><i class="fa fa-check"></i><b>2.3</b> Functions</a><ul>
<li class="chapter" data-level="2.3.1" data-path="Chap-01-01-functions.html"><a href="Chap-01-01-functions.html#some-important-built-in-functions"><i class="fa fa-check"></i><b>2.3.1</b> Some important built-in functions</a></li>
<li class="chapter" data-level="2.3.2" data-path="Chap-01-01-functions.html"><a href="Chap-01-01-functions.html#defining-your-own-functions"><i class="fa fa-check"></i><b>2.3.2</b> Defining your own functions</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="ch-01-01-loops-and-maps.html"><a href="ch-01-01-loops-and-maps.html"><i class="fa fa-check"></i><b>2.4</b> Loops and maps</a><ul>
<li class="chapter" data-level="2.4.1" data-path="ch-01-01-loops-and-maps.html"><a href="ch-01-01-loops-and-maps.html#for-loops"><i class="fa fa-check"></i><b>2.4.1</b> For-loops</a></li>
<li class="chapter" data-level="2.4.2" data-path="ch-01-01-loops-and-maps.html"><a href="ch-01-01-loops-and-maps.html#functional-iterators"><i class="fa fa-check"></i><b>2.4.2</b> Functional iterators</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="Chap-01-01-piping.html"><a href="Chap-01-01-piping.html"><i class="fa fa-check"></i><b>2.5</b> Piping</a><ul>
<li class="chapter" data-level="2.5.1" data-path="Chap-01-01-piping.html"><a href="Chap-01-01-piping.html#excursion-more-on-pipes-in-r"><i class="fa fa-check"></i><b>2.5.1</b> Excursion: More on pipes in R</a></li>
<li class="chapter" data-level="2.5.2" data-path="Chap-01-01-piping.html"><a href="Chap-01-01-piping.html#excursion-multiple-assignments-or-unpacking"><i class="fa fa-check"></i><b>2.5.2</b> Excursion: Multiple assignments, or “unpacking”</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="ch-01-01-Rmarkdown.html"><a href="ch-01-01-Rmarkdown.html"><i class="fa fa-check"></i><b>2.6</b> Rmarkdown</a></li>
</ul></li>
<li class="part"><span><b>II Data</b></span></li>
<li class="chapter" data-level="3" data-path="Chap-02-01-data.html"><a href="Chap-02-01-data.html"><i class="fa fa-check"></i><b>3</b> Data, variables &amp; experimental designs</a><ul>
<li class="chapter" data-level="3.1" data-path="Chap-02-01-data-what-is-data.html"><a href="Chap-02-01-data-what-is-data.html"><i class="fa fa-check"></i><b>3.1</b> What is data?</a></li>
<li class="chapter" data-level="3.2" data-path="Chap-02-01-data-kinds-of-data.html"><a href="Chap-02-01-data-kinds-of-data.html"><i class="fa fa-check"></i><b>3.2</b> Different kinds of data</a></li>
<li class="chapter" data-level="3.3" data-path="Chap-02-01-data-variables.html"><a href="Chap-02-01-data-variables.html"><i class="fa fa-check"></i><b>3.3</b> On the notion of “variables”</a></li>
<li class="chapter" data-level="3.4" data-path="Chap-02-01-data-exp-design.html"><a href="Chap-02-01-data-exp-design.html"><i class="fa fa-check"></i><b>3.4</b> Basics of experimental design</a><ul>
<li class="chapter" data-level="3.4.1" data-path="Chap-02-01-data-exp-design.html"><a href="Chap-02-01-data-exp-design.html#what-to-analyze-dependent-variables"><i class="fa fa-check"></i><b>3.4.1</b> What to analyze? – Dependent variables</a></li>
<li class="chapter" data-level="3.4.2" data-path="Chap-02-01-data-exp-design.html"><a href="Chap-02-01-data-exp-design.html#conditions-trials-items"><i class="fa fa-check"></i><b>3.4.2</b> Conditions, trials, items</a></li>
<li class="chapter" data-level="3.4.3" data-path="Chap-02-01-data-exp-design.html"><a href="Chap-02-01-data-exp-design.html#sample-size"><i class="fa fa-check"></i><b>3.4.3</b> Sample size</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>4</b> Data Wrangling</a><ul>
<li class="chapter" data-level="4.1" data-path="Chap-02-02-data-IO.html"><a href="Chap-02-02-data-IO.html"><i class="fa fa-check"></i><b>4.1</b> Data in, data out</a></li>
<li class="chapter" data-level="4.2" data-path="Chap-02-02-data-tidy-data.html"><a href="Chap-02-02-data-tidy-data.html"><i class="fa fa-check"></i><b>4.2</b> Tidy data</a><ul>
<li class="chapter" data-level="4.2.1" data-path="Chap-02-02-data-tidy-data.html"><a href="Chap-02-02-data-tidy-data.html#running-example"><i class="fa fa-check"></i><b>4.2.1</b> Running example</a></li>
<li class="chapter" data-level="4.2.2" data-path="Chap-02-02-data-tidy-data.html"><a href="Chap-02-02-data-tidy-data.html#definition-of-tidy-data"><i class="fa fa-check"></i><b>4.2.2</b> Definition of <em>tidy data</em></a></li>
<li class="chapter" data-level="4.2.3" data-path="Chap-02-02-data-tidy-data.html"><a href="Chap-02-02-data-tidy-data.html#excursion-non-redundant-data"><i class="fa fa-check"></i><b>4.2.3</b> Excursion: non-redundant data</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html"><i class="fa fa-check"></i><b>4.3</b> Data manipulation: the basics</a><ul>
<li class="chapter" data-level="4.3.1" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#pivoting"><i class="fa fa-check"></i><b>4.3.1</b> Pivoting</a></li>
<li class="chapter" data-level="4.3.2" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#subsetting-rows-columns"><i class="fa fa-check"></i><b>4.3.2</b> Subsetting rows &amp; columns</a></li>
<li class="chapter" data-level="4.3.3" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#Chap-02-02-tidy-selection"><i class="fa fa-check"></i><b>4.3.3</b> Tidy selection of column names</a></li>
<li class="chapter" data-level="4.3.4" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#adding-changing-and-renaming-columns"><i class="fa fa-check"></i><b>4.3.4</b> Adding, changing and renaming columns</a></li>
<li class="chapter" data-level="4.3.5" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#splitting-and-uniting-columns"><i class="fa fa-check"></i><b>4.3.5</b> Splitting and uniting columns</a></li>
<li class="chapter" data-level="4.3.6" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#sorting-a-data-set"><i class="fa fa-check"></i><b>4.3.6</b> Sorting a data set</a></li>
<li class="chapter" data-level="4.3.7" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#combining-tibbles"><i class="fa fa-check"></i><b>4.3.7</b> Combining tibbles</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="Chap-02-02-data-grouping-nesting.html"><a href="Chap-02-02-data-grouping-nesting.html"><i class="fa fa-check"></i><b>4.4</b> Grouped operations</a></li>
<li class="chapter" data-level="4.5" data-path="Chap-02-02-data-case-study-KoF.html"><a href="Chap-02-02-data-case-study-KoF.html"><i class="fa fa-check"></i><b>4.5</b> Case study: the King of France</a><ul>
<li class="chapter" data-level="4.5.1" data-path="Chap-02-02-data-case-study-KoF.html"><a href="Chap-02-02-data-case-study-KoF.html#cleaning-the-data"><i class="fa fa-check"></i><b>4.5.1</b> Cleaning the data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Chap-02-03-summary-statistics.html"><a href="Chap-02-03-summary-statistics.html"><i class="fa fa-check"></i><b>5</b> Summary statistics</a><ul>
<li class="chapter" data-level="5.1" data-path="Chap-02-03-summary-statistics-counts.html"><a href="Chap-02-03-summary-statistics-counts.html"><i class="fa fa-check"></i><b>5.1</b> Counts and proportions</a><ul>
<li class="chapter" data-level="5.1.1" data-path="Chap-02-03-summary-statistics-counts.html"><a href="Chap-02-03-summary-statistics-counts.html#loading-and-inspecting-the-data"><i class="fa fa-check"></i><b>5.1.1</b> Loading and inspecting the data</a></li>
<li class="chapter" data-level="5.1.2" data-path="Chap-02-03-summary-statistics-counts.html"><a href="Chap-02-03-summary-statistics-counts.html#obtaining-counts-with-n-count-and-tally"><i class="fa fa-check"></i><b>5.1.2</b> Obtaining counts with <code>n</code>, <code>count</code> and <code>tally</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html"><i class="fa fa-check"></i><b>5.2</b> Central tendency and dispersion</a><ul>
<li class="chapter" data-level="5.2.1" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html#the-data-for-the-remainder-of-the-chapter"><i class="fa fa-check"></i><b>5.2.1</b> The data for the remainder of the chapter</a></li>
<li class="chapter" data-level="5.2.2" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>5.2.2</b> Measures of central tendency</a></li>
<li class="chapter" data-level="5.2.3" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html#measures-of-dispersion"><i class="fa fa-check"></i><b>5.2.3</b> Measures of dispersion</a></li>
<li class="chapter" data-level="5.2.4" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html#excursion-quantifying-confidence-with-bootstrapping"><i class="fa fa-check"></i><b>5.2.4</b> Excursion: Quantifying confidence with bootstrapping</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="Chap-02-03-summary-statistics-2D.html"><a href="Chap-02-03-summary-statistics-2D.html"><i class="fa fa-check"></i><b>5.3</b> Covariance and correlation</a><ul>
<li class="chapter" data-level="5.3.1" data-path="Chap-02-03-summary-statistics-2D.html"><a href="Chap-02-03-summary-statistics-2D.html#covariance"><i class="fa fa-check"></i><b>5.3.1</b> Covariance</a></li>
<li class="chapter" data-level="5.3.2" data-path="Chap-02-03-summary-statistics-2D.html"><a href="Chap-02-03-summary-statistics-2D.html#correlation"><i class="fa fa-check"></i><b>5.3.2</b> Correlation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="Chap-02-02-visualization.html"><a href="Chap-02-02-visualization.html"><i class="fa fa-check"></i><b>6</b> Data Visualization</a><ul>
<li class="chapter" data-level="6.1" data-path="Chap-02-04-Anscombe-example.html"><a href="Chap-02-04-Anscombe-example.html"><i class="fa fa-check"></i><b>6.1</b> Motivating example: Anscombe’s quartet</a></li>
<li class="chapter" data-level="6.2" data-path="Chap-02-04-good-visualization.html"><a href="Chap-02-04-good-visualization.html"><i class="fa fa-check"></i><b>6.2</b> Visualization: the good, the bad and the infographic</a></li>
<li class="chapter" data-level="6.3" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html"><i class="fa fa-check"></i><b>6.3</b> Basics of <code>ggplot</code></a><ul>
<li class="chapter" data-level="6.3.1" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#incremental-composition-of-a-plot"><i class="fa fa-check"></i><b>6.3.1</b> Incremental composition of a plot</a></li>
<li class="chapter" data-level="6.3.2" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#elements-in-the-layered-grammar-of-graphs"><i class="fa fa-check"></i><b>6.3.2</b> Elements in the layered grammar of graphs</a></li>
<li class="chapter" data-level="6.3.3" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#layers-and-groups"><i class="fa fa-check"></i><b>6.3.3</b> Layers and groups</a></li>
<li class="chapter" data-level="6.3.4" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#grouping"><i class="fa fa-check"></i><b>6.3.4</b> Grouping</a></li>
<li class="chapter" data-level="6.3.5" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#example-of-a-customized-plot"><i class="fa fa-check"></i><b>6.3.5</b> Example of a customized plot</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html"><i class="fa fa-check"></i><b>6.4</b> A rendezvous with popular geoms</a><ul>
<li class="chapter" data-level="6.4.1" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#scatter-plots-with-geom_point"><i class="fa fa-check"></i><b>6.4.1</b> Scatter plots with <code>geom_point</code></a></li>
<li class="chapter" data-level="6.4.2" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#smooth"><i class="fa fa-check"></i><b>6.4.2</b> Smooth</a></li>
<li class="chapter" data-level="6.4.3" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#line"><i class="fa fa-check"></i><b>6.4.3</b> Line</a></li>
<li class="chapter" data-level="6.4.4" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#bar-plot"><i class="fa fa-check"></i><b>6.4.4</b> Bar plot</a></li>
<li class="chapter" data-level="6.4.5" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#plotting-distributions-histograms-boxplots-densities-and-violins"><i class="fa fa-check"></i><b>6.4.5</b> Plotting distributions: histograms, boxplots, densities and violins</a></li>
<li class="chapter" data-level="6.4.6" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#rugs"><i class="fa fa-check"></i><b>6.4.6</b> Rugs</a></li>
<li class="chapter" data-level="6.4.7" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#annotation"><i class="fa fa-check"></i><b>6.4.7</b> Annotation</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="Chap-02-04-faceting.html"><a href="Chap-02-04-faceting.html"><i class="fa fa-check"></i><b>6.5</b> Faceting</a></li>
<li class="chapter" data-level="6.6" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html"><i class="fa fa-check"></i><b>6.6</b> Customization etc.</a><ul>
<li class="chapter" data-level="6.6.1" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#themes"><i class="fa fa-check"></i><b>6.6.1</b> Themes</a></li>
<li class="chapter" data-level="6.6.2" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#guides"><i class="fa fa-check"></i><b>6.6.2</b> Guides</a></li>
<li class="chapter" data-level="6.6.3" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#axes-ticks-and-tick-labels"><i class="fa fa-check"></i><b>6.6.3</b> Axes, ticks and tick labels</a></li>
<li class="chapter" data-level="6.6.4" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#labels"><i class="fa fa-check"></i><b>6.6.4</b> Labels</a></li>
<li class="chapter" data-level="6.6.5" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#combining-arranging-plots"><i class="fa fa-check"></i><b>6.6.5</b> Combining &amp; arranging plots</a></li>
<li class="chapter" data-level="6.6.6" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#latex-expressions-in-plot-labels"><i class="fa fa-check"></i><b>6.6.6</b> LaTeX expressions in plot labels</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Bayesian Data Analysis</b></span></li>
<li class="chapter" data-level="7" data-path="Chap-03-01-probability.html"><a href="Chap-03-01-probability.html"><i class="fa fa-check"></i><b>7</b> Basics of Probability Theory</a><ul>
<li class="chapter" data-level="7.1" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html"><i class="fa fa-check"></i><b>7.1</b> Probability</a><ul>
<li class="chapter" data-level="7.1.1" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html#outcomes-events-observations"><i class="fa fa-check"></i><b>7.1.1</b> Outcomes, events, observations</a></li>
<li class="chapter" data-level="7.1.2" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html#probability-distributions"><i class="fa fa-check"></i><b>7.1.2</b> Probability distributions</a></li>
<li class="chapter" data-level="7.1.3" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html#interpretations-of-probability"><i class="fa fa-check"></i><b>7.1.3</b> Interpretations of probability</a></li>
<li class="chapter" data-level="7.1.4" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html#distributions-as-samples"><i class="fa fa-check"></i><b>7.1.4</b> Distributions as samples</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="Chap-03-01-probability-marginal.html"><a href="Chap-03-01-probability-marginal.html"><i class="fa fa-check"></i><b>7.2</b> Structured events &amp; marginal distributions</a><ul>
<li class="chapter" data-level="7.2.1" data-path="Chap-03-01-probability-marginal.html"><a href="Chap-03-01-probability-marginal.html#probability-table-for-a-flip-and-draw-scenario"><i class="fa fa-check"></i><b>7.2.1</b> Probability table for a flip-and-draw scenario</a></li>
<li class="chapter" data-level="7.2.2" data-path="Chap-03-01-probability-marginal.html"><a href="Chap-03-01-probability-marginal.html#structured-events-and-joint-probability-distributions"><i class="fa fa-check"></i><b>7.2.2</b> Structured events and joint-probability distributions</a></li>
<li class="chapter" data-level="7.2.3" data-path="Chap-03-01-probability-marginal.html"><a href="Chap-03-01-probability-marginal.html#marginalization"><i class="fa fa-check"></i><b>7.2.3</b> Marginalization</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="Chap-03-01-probability-conditional.html"><a href="Chap-03-01-probability-conditional.html"><i class="fa fa-check"></i><b>7.3</b> Conditional probability</a><ul>
<li class="chapter" data-level="7.3.1" data-path="Chap-03-01-probability-conditional.html"><a href="Chap-03-01-probability-conditional.html#bayes-rule"><i class="fa fa-check"></i><b>7.3.1</b> Bayes rule</a></li>
<li class="chapter" data-level="7.3.2" data-path="Chap-03-01-probability-conditional.html"><a href="Chap-03-01-probability-conditional.html#Chap-03-01-probability-independence"><i class="fa fa-check"></i><b>7.3.2</b> Stochastic (in-)dependence</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html"><i class="fa fa-check"></i><b>7.4</b> Random variables</a><ul>
<li class="chapter" data-level="7.4.1" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html#notation-terminology"><i class="fa fa-check"></i><b>7.4.1</b> Notation &amp; terminology</a></li>
<li class="chapter" data-level="7.4.2" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html#cumulative-distribution-functions-mass-density"><i class="fa fa-check"></i><b>7.4.2</b> Cumulative distribution functions, mass &amp; density</a></li>
<li class="chapter" data-level="7.4.3" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html#expected-value-variance"><i class="fa fa-check"></i><b>7.4.3</b> Expected value &amp; variance</a></li>
<li class="chapter" data-level="7.4.4" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html#composite-random-variables"><i class="fa fa-check"></i><b>7.4.4</b> Composite random variables</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="Chap-03-01-probability-R.html"><a href="Chap-03-01-probability-R.html"><i class="fa fa-check"></i><b>7.5</b> Probability distributions in R</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Chap-03-03-models.html"><a href="Chap-03-03-models.html"><i class="fa fa-check"></i><b>8</b> Statistical models</a><ul>
<li class="chapter" data-level="8.1" data-path="Chap-03-03-models-general.html"><a href="Chap-03-03-models-general.html"><i class="fa fa-check"></i><b>8.1</b> Statistical models</a></li>
<li class="chapter" data-level="8.2" data-path="Chap-03-03-models-representation.html"><a href="Chap-03-03-models-representation.html"><i class="fa fa-check"></i><b>8.2</b> Notation &amp; graphical representation</a><ul>
<li class="chapter" data-level="8.2.1" data-path="Chap-03-03-models-representation.html"><a href="Chap-03-03-models-representation.html#formula-notation"><i class="fa fa-check"></i><b>8.2.1</b> Formula notation</a></li>
<li class="chapter" data-level="8.2.2" data-path="Chap-03-03-models-representation.html"><a href="Chap-03-03-models-representation.html#graphical-notation"><i class="fa fa-check"></i><b>8.2.2</b> Graphical notation</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="Chap-03-03-models-parameters-priors.html"><a href="Chap-03-03-models-parameters-priors.html"><i class="fa fa-check"></i><b>8.3</b> Parameters, priors, and prior predictions</a><ul>
<li class="chapter" data-level="8.3.1" data-path="Chap-03-03-models-parameters-priors.html"><a href="Chap-03-03-models-parameters-priors.html#whats-a-model-parameter"><i class="fa fa-check"></i><b>8.3.1</b> What’s a model parameter?</a></li>
<li class="chapter" data-level="8.3.2" data-path="Chap-03-03-models-parameters-priors.html"><a href="Chap-03-03-models-parameters-priors.html#Chap-03-02-models-priors"><i class="fa fa-check"></i><b>8.3.2</b> Priors over parameters</a></li>
<li class="chapter" data-level="8.3.3" data-path="Chap-03-03-models-parameters-priors.html"><a href="Chap-03-03-models-parameters-priors.html#Chap-03-03-models-parameters-prior-predictive"><i class="fa fa-check"></i><b>8.3.3</b> Prior predictions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ch-03-04-parameter-estimation.html"><a href="ch-03-04-parameter-estimation.html"><i class="fa fa-check"></i><b>9</b> Bayesian parameter estimation</a><ul>
<li class="chapter" data-level="9.1" data-path="ch-03-03-estimation-bayes.html"><a href="ch-03-03-estimation-bayes.html"><i class="fa fa-check"></i><b>9.1</b> Bayes rule for parameter estimation</a><ul>
<li class="chapter" data-level="9.1.1" data-path="ch-03-03-estimation-bayes.html"><a href="ch-03-03-estimation-bayes.html#definitions-and-terminology"><i class="fa fa-check"></i><b>9.1.1</b> Definitions and terminology</a></li>
<li class="chapter" data-level="9.1.2" data-path="ch-03-03-estimation-bayes.html"><a href="ch-03-03-estimation-bayes.html#the-effects-of-prior-and-likelihood-on-the-posterior"><i class="fa fa-check"></i><b>9.1.2</b> The effects of prior and likelihood on the posterior</a></li>
<li class="chapter" data-level="9.1.3" data-path="ch-03-03-estimation-bayes.html"><a href="ch-03-03-estimation-bayes.html#ch-03-04-parameter-estimation-conjugacy"><i class="fa fa-check"></i><b>9.1.3</b> Computing Bayesian posteriors with conjugate priors</a></li>
<li class="chapter" data-level="9.1.4" data-path="ch-03-03-estimation-bayes.html"><a href="ch-03-03-estimation-bayes.html#excursion-sequential-updating"><i class="fa fa-check"></i><b>9.1.4</b> Excursion: Sequential updating</a></li>
<li class="chapter" data-level="9.1.5" data-path="ch-03-03-estimation-bayes.html"><a href="ch-03-03-estimation-bayes.html#posterior-predictive-distribution"><i class="fa fa-check"></i><b>9.1.5</b> Posterior predictive distribution</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="ch-03-04-parameter-estimation-points-intervals.html"><a href="ch-03-04-parameter-estimation-points-intervals.html"><i class="fa fa-check"></i><b>9.2</b> Point-valued and interval-ranged estimates</a><ul>
<li class="chapter" data-level="9.2.1" data-path="ch-03-04-parameter-estimation-points-intervals.html"><a href="ch-03-04-parameter-estimation-points-intervals.html#point-valued-estimates"><i class="fa fa-check"></i><b>9.2.1</b> Point-valued estimates</a></li>
<li class="chapter" data-level="9.2.2" data-path="ch-03-04-parameter-estimation-points-intervals.html"><a href="ch-03-04-parameter-estimation-points-intervals.html#interval-ranged-estimates"><i class="fa fa-check"></i><b>9.2.2</b> Interval-ranged estimates</a></li>
<li class="chapter" data-level="9.2.3" data-path="ch-03-04-parameter-estimation-points-intervals.html"><a href="ch-03-04-parameter-estimation-points-intervals.html#computing-bayesian-estimates"><i class="fa fa-check"></i><b>9.2.3</b> Computing Bayesian estimates</a></li>
<li class="chapter" data-level="9.2.4" data-path="ch-03-04-parameter-estimation-points-intervals.html"><a href="ch-03-04-parameter-estimation-points-intervals.html#excursion-computing-mles-and-maps-in-r"><i class="fa fa-check"></i><b>9.2.4</b> Excursion: Computing MLEs and MAPs in R</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="Ch-03-03-estimation-algorithms.html"><a href="Ch-03-03-estimation-algorithms.html"><i class="fa fa-check"></i><b>9.3</b> Approximating the posterior</a><ul>
<li class="chapter" data-level="9.3.1" data-path="Ch-03-03-estimation-algorithms.html"><a href="Ch-03-03-estimation-algorithms.html#ch-03-03-MCMC"><i class="fa fa-check"></i><b>9.3.1</b> Of apples and trees: Markov Chain Monte Carlo sampling</a></li>
<li class="chapter" data-level="9.3.2" data-path="Ch-03-03-estimation-algorithms.html"><a href="Ch-03-03-estimation-algorithms.html#ch-03-03-estimation-Stan"><i class="fa fa-check"></i><b>9.3.2</b> Excursion: Probabilistic modeling with Stan</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="ch-03-04-parameter-estimation-normal.html"><a href="ch-03-04-parameter-estimation-normal.html"><i class="fa fa-check"></i><b>9.4</b> Estimating the parameters of a Normal distribution</a><ul>
<li class="chapter" data-level="9.4.1" data-path="ch-03-04-parameter-estimation-normal.html"><a href="ch-03-04-parameter-estimation-normal.html#uninformative-priors"><i class="fa fa-check"></i><b>9.4.1</b> Uninformative priors</a></li>
<li class="chapter" data-level="9.4.2" data-path="ch-03-04-parameter-estimation-normal.html"><a href="ch-03-04-parameter-estimation-normal.html#conjugate-priors"><i class="fa fa-check"></i><b>9.4.2</b> Conjugate priors</a></li>
<li class="chapter" data-level="9.4.3" data-path="ch-03-04-parameter-estimation-normal.html"><a href="ch-03-04-parameter-estimation-normal.html#estimating-the-difference-between-group-means"><i class="fa fa-check"></i><b>9.4.3</b> Estimating the difference between group means</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Chap-03-06-model-comparison.html"><a href="Chap-03-06-model-comparison.html"><i class="fa fa-check"></i><b>10</b> Model Comparison</a><ul>
<li class="chapter" data-level="10.1" data-path="Chap-03-06-model-comparison-case-study.html"><a href="Chap-03-06-model-comparison-case-study.html"><i class="fa fa-check"></i><b>10.1</b> Case study: recall models</a></li>
<li class="chapter" data-level="10.2" data-path="Chap-03-06-model-comparison-AIC.html"><a href="Chap-03-06-model-comparison-AIC.html"><i class="fa fa-check"></i><b>10.2</b> Akaike Information Criterion</a></li>
<li class="chapter" data-level="10.3" data-path="Chap-03-06-model-comparison-BF.html"><a href="Chap-03-06-model-comparison-BF.html"><i class="fa fa-check"></i><b>10.3</b> Bayes factors</a><ul>
<li class="chapter" data-level="10.3.1" data-path="Chap-03-06-model-comparison-BF.html"><a href="Chap-03-06-model-comparison-BF.html#Chap-03-06-model-comparison-BF-grid"><i class="fa fa-check"></i><b>10.3.1</b> Grid approximation</a></li>
<li class="chapter" data-level="10.3.2" data-path="Chap-03-06-model-comparison-BF.html"><a href="Chap-03-06-model-comparison-BF.html#Chap-03-06-model-comparison-BF-naiveMC"><i class="fa fa-check"></i><b>10.3.2</b> Naive Monte Carlo</a></li>
<li class="chapter" data-level="10.3.3" data-path="Chap-03-06-model-comparison-BF.html"><a href="Chap-03-06-model-comparison-BF.html#Chap-03-06-model-comparison-BF-bridge"><i class="fa fa-check"></i><b>10.3.3</b> Excursion: Bridge sampling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="ch-03-07-hypothesis-testing-Bayes.html"><a href="ch-03-07-hypothesis-testing-Bayes.html"><i class="fa fa-check"></i><b>11</b> Bayesian hypothesis testing</a><ul>
<li class="chapter" data-level="11.1" data-path="ch-03-07-hypothesis-testing-Bayes-hypotheses.html"><a href="ch-03-07-hypothesis-testing-Bayes-hypotheses.html"><i class="fa fa-check"></i><b>11.1</b> Statistical hypotheses</a></li>
<li class="chapter" data-level="11.2" data-path="data-and-models-for-this-chapter.html"><a href="data-and-models-for-this-chapter.html"><i class="fa fa-check"></i><b>11.2</b> Data and models for this chapter</a><ul>
<li class="chapter" data-level="11.2.1" data-path="data-and-models-for-this-chapter.html"><a href="data-and-models-for-this-chapter.html#section-1"><i class="fa fa-check"></i><b>11.2.1</b> 24/7</a></li>
<li class="chapter" data-level="11.2.2" data-path="data-and-models-for-this-chapter.html"><a href="data-and-models-for-this-chapter.html#simon-task"><i class="fa fa-check"></i><b>11.2.2</b> Simon task</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="ch-03-05-Bayes-testing-estimation.html"><a href="ch-03-05-Bayes-testing-estimation.html"><i class="fa fa-check"></i><b>11.3</b> Testing via posterior estimation</a><ul>
<li class="chapter" data-level="11.3.1" data-path="ch-03-05-Bayes-testing-estimation.html"><a href="ch-03-05-Bayes-testing-estimation.html#example-247"><i class="fa fa-check"></i><b>11.3.1</b> Example: 24/7</a></li>
<li class="chapter" data-level="11.3.2" data-path="ch-03-05-Bayes-testing-estimation.html"><a href="ch-03-05-Bayes-testing-estimation.html#example-simon-task"><i class="fa fa-check"></i><b>11.3.2</b> Example: Simon Task</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="ch-03-05-Bayesian-testing-comparison.html"><a href="ch-03-05-Bayesian-testing-comparison.html"><i class="fa fa-check"></i><b>11.4</b> Testing via model comparison</a><ul>
<li class="chapter" data-level="11.4.1" data-path="ch-03-05-Bayesian-testing-comparison.html"><a href="ch-03-05-Bayesian-testing-comparison.html#ch-03-07-hypothesis-testing-Bayes-Savage-Dickey"><i class="fa fa-check"></i><b>11.4.1</b> The Savage-Dickey method</a></li>
<li class="chapter" data-level="11.4.2" data-path="ch-03-05-Bayesian-testing-comparison.html"><a href="ch-03-05-Bayesian-testing-comparison.html#ch-03-07-hypothesis-testing-Bayes-encompassing-models"><i class="fa fa-check"></i><b>11.4.2</b> Encompassing models</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to Data Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Chap-02-02-data-preprocessing-cleaning" class="section level2">
<h2><span class="header-section-number">4.3</span> Data manipulation: the basics</h2>
<div id="pivoting" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Pivoting</h3>
<p>The tidyverse strongly encourages the use of tidy data, or at least almost tidy data. If your data is (almost) tidy, you can be reasonably sure that you can plot and analyze the data without additional wrangling. If your data is not (almost) tidy because it is too wide or too long (see below), what is required is a joyful round of pivoting. There are two directions of pivoting: making data longer, and making data wider.</p>
<div id="making-too-wide-data-longer-with-pivot_longer" class="section level4">
<h4><span class="header-section-number">4.3.1.1</span> Making too wide data longer with <code>pivot_longer</code></h4>
<p>Consider the previous example of messy data again:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb224-1"></a>exam_results_visual &lt;-<span class="st"> </span><span class="kw">tribble</span>(</span>
<span id="cb224-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb224-2"></a>  <span class="op">~</span>exam,       <span class="op">~</span><span class="st">&quot;Rozz&quot;</span>,   <span class="op">~</span><span class="st">&quot;Andrew&quot;</span>,   <span class="op">~</span><span class="st">&quot;Siouxsie&quot;</span>,</span>
<span id="cb224-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb224-3"></a>  <span class="st">&quot;midterm&quot;</span>,   <span class="st">&quot;1.3&quot;</span>,     <span class="st">&quot;2.0&quot;</span>,       <span class="st">&quot;1.7&quot;</span>,</span>
<span id="cb224-4"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb224-4"></a>  <span class="st">&quot;final&quot;</span>  ,   <span class="st">&quot;2.3&quot;</span>,     <span class="st">&quot;1.7&quot;</span>,       <span class="st">&quot;1.0&quot;</span></span>
<span id="cb224-5"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb224-5"></a>)</span>
<span id="cb224-6"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb224-6"></a>exam_results_visual</span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   exam    Rozz  Andrew Siouxsie
##   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   
## 1 midterm 1.3   2.0    1.7     
## 2 final   2.3   1.7    1.0</code></pre>
<p>This data is “too wide”. We can make it longer with the function <code>pivot_longer</code> from the <code>tidyr</code> package. Check out the example below before we plunge into a description of <code>pivot_longer</code>.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-1"></a>exam_results_visual <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb226-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(</span>
<span id="cb226-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-3"></a>    <span class="co"># pivot every column except the first </span></span>
<span id="cb226-4"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-4"></a>    <span class="co"># (a negative number here means &quot;exclude column with that index number&quot;)</span></span>
<span id="cb226-5"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-5"></a>    <span class="dt">cols =</span> <span class="op">-</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb226-6"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-6"></a>    <span class="co"># name of new column which contains the</span></span>
<span id="cb226-7"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-7"></a>    <span class="co"># names of the columns to be &quot;gathered&quot;</span></span>
<span id="cb226-8"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-8"></a>    <span class="dt">names_to =</span> <span class="st">&quot;student&quot;</span>,</span>
<span id="cb226-9"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-9"></a>    <span class="co"># name of new column which contains the values</span></span>
<span id="cb226-10"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-10"></a>    <span class="co"># of the cells which now form a new column</span></span>
<span id="cb226-11"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-11"></a>    <span class="dt">values_to =</span> <span class="st">&quot;grade&quot;</span></span>
<span id="cb226-12"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-12"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb226-13"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-13"></a><span class="st">  </span><span class="co"># optional reordering of columns (to make </span></span>
<span id="cb226-14"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-14"></a><span class="st">  </span><span class="co"># the output exactly like `exam_results_tidy`)</span></span>
<span id="cb226-15"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb226-15"></a><span class="st">  </span><span class="kw">select</span>(student, exam, grade)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   student  exam    grade
##   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;
## 1 Rozz     midterm 1.3  
## 2 Andrew   midterm 2.0  
## 3 Siouxsie midterm 1.7  
## 4 Rozz     final   2.3  
## 5 Andrew   final   1.7  
## 6 Siouxsie final   1.0</code></pre>
<p>What <code>pivot_longer</code> does, in general, is take a bunch of columns and gather the values of all cells in these columns into a single, new column, the so-called <em>value column</em>, i.e., the column with the values of the cells to be gathered. If <code>pivot_longer</code> stopped here, we would lose information about which cell values belonged to which original column. Therefore, <code>pivot_longer</code> also creates a second new column, the so-called <em>name column</em>, i.e., the column with the names of the original columns that we gathered together. Consequently, in order to do its job, <code>pivot_longer</code> minimally needs three pieces of information:<a href="#fn18" class="footnote-ref" id="fnref18"><sup>18</sup></a></p>
<ol style="list-style-type: decimal">
<li>which columns to spin around (function argument <code>cols</code>)</li>
<li>the name of the to-be-created new value column (function argument <code>values_to</code>)</li>
<li>the name of the to-be-created new name column (function argument <code>names_to</code>)</li>
</ol>
<p>For different ways of selecting columns to pivot around, see Section <a href="Chap-02-02-data-preprocessing-cleaning.html#Chap-02-02-tidy-selection">4.3.3</a> below.</p>
</div>
<div id="making-too-long-data-wider-with-pivot_wider" class="section level4">
<h4><span class="header-section-number">4.3.1.2</span> Making too long data wider with <code>pivot_wider</code></h4>
<p>Consider the following example of data which is untidy because it is too long:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb228-1"></a>mixed_results_too_long &lt;-<span class="st"> </span></span>
<span id="cb228-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb228-2"></a><span class="st">  </span><span class="kw">tibble</span>(<span class="dt">student =</span> <span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&#39;Rozz&#39;</span>, <span class="st">&#39;Andrew&#39;</span>, <span class="st">&#39;Siouxsie&#39;</span>), <span class="dt">times =</span> <span class="dv">2</span>),</span>
<span id="cb228-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb228-3"></a>         <span class="dt">what    =</span> <span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&#39;grade&#39;</span>, <span class="st">&#39;participation&#39;</span>), <span class="dt">each =</span> <span class="dv">3</span>),</span>
<span id="cb228-4"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb228-4"></a>         <span class="dt">howmuch =</span> <span class="kw">c</span>(<span class="fl">2.7</span>, <span class="fl">2.0</span>, <span class="fl">1.0</span>, <span class="dv">75</span>, <span class="dv">93</span>, <span class="dv">33</span>))</span>
<span id="cb228-5"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb228-5"></a>mixed_results_too_long</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   student  what          howmuch
##   &lt;chr&gt;    &lt;chr&gt;           &lt;dbl&gt;
## 1 Rozz     grade             2.7
## 2 Andrew   grade             2  
## 3 Siouxsie grade             1  
## 4 Rozz     participation    75  
## 5 Andrew   participation    93  
## 6 Siouxsie participation    33</code></pre>
<p>This data is untidy because it lumps two types of different measurements (a course grade, and the percentage of participation) in a single column. These are different variables, and so should be represented in different columns.</p>
<p>To fix a data representation that is too long, we can make it wider with the help of the <code>pivot_wider</code> function from the <code>tidyr</code> package. We look at an example before looking at the general behavior of the <code>pivot_wider</code> function.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb230-1"></a>mixed_results_too_long <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb230-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb230-2"></a><span class="st">  </span><span class="kw">pivot_wider</span>(</span>
<span id="cb230-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb230-3"></a>    <span class="co"># column containing the names of the new columns</span></span>
<span id="cb230-4"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb230-4"></a>    <span class="dt">names_from =</span> what,</span>
<span id="cb230-5"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb230-5"></a>    <span class="co"># column containing the values of the new columns</span></span>
<span id="cb230-6"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb230-6"></a>    <span class="dt">values_from =</span> howmuch</span>
<span id="cb230-7"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb230-7"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   student  grade participation
##   &lt;chr&gt;    &lt;dbl&gt;         &lt;dbl&gt;
## 1 Rozz       2.7            75
## 2 Andrew     2              93
## 3 Siouxsie   1              33</code></pre>
<p>In general, <code>pivot_wider</code> picks out two columns, one column of values to distribute into new to-be-created columns, and one vector of names or groups which contains the information about the, well, names of the to-be-created new columns. There are more refined options for <code>pivot_wider</code>, some of which we will encounter in the context of concrete cases of application.</p>
</div>
</div>
<div id="subsetting-rows-columns" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Subsetting rows &amp; columns</h3>
<p>If a data set contains too much information for your current purposes, you can discard irrelevant (or unhelpful) rows and columns. The function <code>filter</code> takes a Boolean expression and returns only those rows of which the Boolean expression is true:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb232-1"></a>exam_results_tidy <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb232-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb232-2"></a><span class="st">  </span><span class="co"># keep only entries with grades better than </span></span>
<span id="cb232-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb232-3"></a><span class="st">  </span><span class="co"># or equal to 1.7</span></span>
<span id="cb232-4"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb232-4"></a><span class="st">  </span><span class="kw">filter</span>(grade <span class="op">&lt;=</span><span class="st"> </span><span class="fl">1.7</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   student  exam    grade
##   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;
## 1 Rozz     midterm   1.3
## 2 Siouxsie midterm   1.7
## 3 Andrew   final     1.7
## 4 Siouxsie final     1</code></pre>
<p>To select rows by an index or a vector of indeces, use the <code>slice</code> function:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb234-1"></a>exam_results_tidy <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb234-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb234-2"></a><span class="st">  </span><span class="co"># keep only entries from rows with an even index</span></span>
<span id="cb234-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb234-3"></a><span class="st">  </span><span class="kw">slice</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)) </span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   student  exam    grade
##   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;
## 1 Andrew   midterm   2  
## 2 Rozz     final     2.3
## 3 Siouxsie final     1</code></pre>
<p>The function <code>select</code> allows to pick out a subset of columns. Interestingly, it can also be used to reorder columns, because the order in which column names are specified matches the order in the returned tibble.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb236-1"></a>exam_results_tidy <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb236-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb236-2"></a><span class="st">  </span><span class="co"># select columns `grade` and `exam`</span></span>
<span id="cb236-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb236-3"></a><span class="st">  </span><span class="kw">select</span>(grade, exam)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   grade exam   
##   &lt;dbl&gt; &lt;chr&gt;  
## 1   1.3 midterm
## 2   2   midterm
## 3   1.7 midterm
## 4   2.3 final  
## 5   1.7 final  
## 6   1   final</code></pre>
</div>
<div id="Chap-02-02-tidy-selection" class="section level3">
<h3><span class="header-section-number">4.3.3</span> Tidy selection of column names</h3>
<p>To select the columns in several functions within the tidyverse, such as <code>pivot_longer</code> or <code>select</code>, there are useful helper functions from the <code>tidyselect</code> package. Here are some examples:<a href="#fn19" class="footnote-ref" id="fnref19"><sup>19</sup></a></p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-1"></a><span class="co"># bogus code for illustration of possibilities!</span></span>
<span id="cb238-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-2"></a>SOME_DATA <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb238-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-3"></a><span class="st">  </span><span class="kw">select</span>( ... <span class="co"># could be one of the following</span></span>
<span id="cb238-4"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-4"></a>        <span class="co"># all columns indexed 2, 3, ..., 10</span></span>
<span id="cb238-5"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-5"></a>        <span class="dv">2</span><span class="op">:</span><span class="dv">10</span></span>
<span id="cb238-6"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-6"></a>        <span class="co"># all columns except the one called &quot;COLNAME&quot;</span></span>
<span id="cb238-7"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-7"></a>        <span class="op">-</span><span class="st"> </span>COLNAME</span>
<span id="cb238-8"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-8"></a>        <span class="co"># all columns with names starting with &quot;STRING&quot;</span></span>
<span id="cb238-9"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-9"></a>        <span class="kw">starts_with</span>(<span class="st">&quot;STRING&quot;</span>)</span>
<span id="cb238-10"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-10"></a>        <span class="co"># all columns with names ending with &quot;STRING&quot;</span></span>
<span id="cb238-11"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-11"></a>        <span class="kw">ends_with</span>(<span class="st">&quot;STRING&quot;</span>)</span>
<span id="cb238-12"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-12"></a>        <span class="co"># all columns with names containing &quot;STRING&quot;</span></span>
<span id="cb238-13"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-13"></a>        <span class="kw">contains</span>(<span class="st">&quot;STRING&quot;</span>)</span>
<span id="cb238-14"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-14"></a>        <span class="co"># all columns with names of the form &quot;Col_i&quot; with i = 1, ..., 10</span></span>
<span id="cb238-15"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-15"></a>        <span class="kw">num_range</span>(<span class="st">&quot;Col_&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</span>
<span id="cb238-16"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb238-16"></a>  )</span></code></pre></div>
</div>
<div id="adding-changing-and-renaming-columns" class="section level3">
<h3><span class="header-section-number">4.3.4</span> Adding, changing and renaming columns</h3>
<p>To add a new column, or to change an existing one use the function <code>mutate</code>, like so:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb239-1"></a>exam_results_tidy <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb239-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb239-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb239-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb239-3"></a>    <span class="co"># add a new column called &#39;passed&#39; depending on grade</span></span>
<span id="cb239-4"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb239-4"></a>    <span class="co"># [NB: severe passing conditions in this class!!]</span></span>
<span id="cb239-5"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb239-5"></a>    <span class="dt">passed =</span> grade <span class="op">&lt;=</span><span class="st"> </span><span class="fl">1.7</span>, </span>
<span id="cb239-6"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb239-6"></a>    <span class="co"># change an existing column; here: change</span></span>
<span id="cb239-7"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb239-7"></a>    <span class="co"># character column &#39;exam&#39; to ordered factor</span></span>
<span id="cb239-8"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb239-8"></a>    <span class="dt">exam =</span> <span class="kw">factor</span>(exam, <span class="dt">ordered =</span> T)</span>
<span id="cb239-9"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb239-9"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   student  exam    grade passed
##   &lt;chr&gt;    &lt;ord&gt;   &lt;dbl&gt; &lt;lgl&gt; 
## 1 Rozz     midterm   1.3 TRUE  
## 2 Andrew   midterm   2   FALSE 
## 3 Siouxsie midterm   1.7 TRUE  
## 4 Rozz     final     2.3 FALSE 
## 5 Andrew   final     1.7 TRUE  
## 6 Siouxsie final     1   TRUE</code></pre>
<p>If you want to rename a column, function <code>rename</code> is what you want:</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb241-1"></a>exam_results_tidy <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb241-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb241-2"></a><span class="st">  </span><span class="co"># rename existing column &quot;student&quot; to new name &quot;participant&quot;</span></span>
<span id="cb241-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb241-3"></a><span class="st">  </span><span class="co"># [NB: rename takes the new name first]</span></span>
<span id="cb241-4"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb241-4"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">participant =</span> student)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   participant exam    grade
##   &lt;chr&gt;       &lt;chr&gt;   &lt;dbl&gt;
## 1 Rozz        midterm   1.3
## 2 Andrew      midterm   2  
## 3 Siouxsie    midterm   1.7
## 4 Rozz        final     2.3
## 5 Andrew      final     1.7
## 6 Siouxsie    final     1</code></pre>
</div>
<div id="splitting-and-uniting-columns" class="section level3">
<h3><span class="header-section-number">4.3.5</span> Splitting and uniting columns</h3>
<p>Here is data from course homework:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb243-1"></a>homework_results_untidy &lt;-<span class="st"> </span></span>
<span id="cb243-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb243-2"></a><span class="st">  </span><span class="kw">tribble</span>(</span>
<span id="cb243-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb243-3"></a>    <span class="op">~</span>student,      <span class="op">~</span>results,</span>
<span id="cb243-4"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb243-4"></a>    <span class="st">&quot;Rozz&quot;</span>,        <span class="st">&quot;1.0,2.3,3.0&quot;</span>,</span>
<span id="cb243-5"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb243-5"></a>    <span class="st">&quot;Andrew&quot;</span>,      <span class="st">&quot;2.3,2.7,1.3&quot;</span>,</span>
<span id="cb243-6"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb243-6"></a>    <span class="st">&quot;Siouxsie&quot;</span>,    <span class="st">&quot;1.7,4.0,1.0&quot;</span></span>
<span id="cb243-7"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb243-7"></a>  )</span></code></pre></div>
<p>This is not a useful representation format. Results of three homework sets are mushed together in a single column. Each value is separated by a comma, but it is all stored as a character vector.</p>
<p>To disentangle information in a single column, use the <code>separate</code> function:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb244-1"></a>homework_results_untidy <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb244-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb244-2"></a><span class="st">  </span><span class="kw">separate</span>(</span>
<span id="cb244-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb244-3"></a>    <span class="co"># which column to split up</span></span>
<span id="cb244-4"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb244-4"></a>    <span class="dt">col =</span> results,</span>
<span id="cb244-5"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb244-5"></a>    <span class="co"># names of the new column to store results</span></span>
<span id="cb244-6"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb244-6"></a>    <span class="dt">into =</span> <span class="kw">str_c</span>(<span class="st">&quot;HW_&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>),</span>
<span id="cb244-7"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb244-7"></a>    <span class="co"># separate by which character / reg-exp</span></span>
<span id="cb244-8"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb244-8"></a>    <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>,</span>
<span id="cb244-9"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb244-9"></a>    <span class="co"># automatically (smart-)convert the type of the new cols</span></span>
<span id="cb244-10"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb244-10"></a>    <span class="dt">convert =</span> T </span>
<span id="cb244-11"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb244-11"></a>    )</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   student   HW_1  HW_2  HW_3
##   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Rozz       1     2.3   3  
## 2 Andrew     2.3   2.7   1.3
## 3 Siouxsie   1.7   4     1</code></pre>
<p>If you have a reason to perform the reverse operation, i.e., join together several columns, use the <code>unite</code> function.</p>
</div>
<div id="sorting-a-data-set" class="section level3">
<h3><span class="header-section-number">4.3.6</span> Sorting a data set</h3>
<p>If you want to indicate a fixed order of the reoccurring elements in a (character) vector, e.g., for plotting in a particular order, you should make this column an ordered factor. But if you want to order a data set along a column, e.g., for inspection or printing as a table, then you can do that by using the <code>arrange</code> function. You can specify several columns to sort alpha-numerically in ascending order, and also indicate a descending order using the <code>desc</code> function:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb246-1"></a>exam_results_tidy <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb246-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb246-2"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(student), grade)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   student  exam    grade
##   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;
## 1 Siouxsie final     1  
## 2 Siouxsie midterm   1.7
## 3 Rozz     midterm   1.3
## 4 Rozz     final     2.3
## 5 Andrew   final     1.7
## 6 Andrew   midterm   2</code></pre>
</div>
<div id="combining-tibbles" class="section level3">
<h3><span class="header-section-number">4.3.7</span> Combining tibbles</h3>
<p>There are frequent occasions on which data from two separate variables need to be combined. The simplest case is where two entirely disjoint data sets merely need to be glued together, either horizontally (binding columns together with function <code>cbind</code>) or vertically (binding rows together with function <code>rbind</code>).</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb248-1"></a>new_exam_results_tidy &lt;-<span class="st"> </span><span class="kw">tribble</span>(</span>
<span id="cb248-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb248-2"></a>  <span class="op">~</span>student,    <span class="op">~</span>exam,      <span class="op">~</span>grade,</span>
<span id="cb248-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb248-3"></a>  <span class="st">&quot;Rozz&quot;</span>,      <span class="st">&quot;bonus&quot;</span>,  <span class="fl">1.7</span>,</span>
<span id="cb248-4"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb248-4"></a>  <span class="st">&quot;Andrew&quot;</span>,    <span class="st">&quot;bonus&quot;</span>,  <span class="fl">2.3</span>,</span>
<span id="cb248-5"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb248-5"></a>  <span class="st">&quot;Siouxsie&quot;</span>,  <span class="st">&quot;bonus&quot;</span>,  <span class="fl">1.0</span></span>
<span id="cb248-6"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb248-6"></a>)</span>
<span id="cb248-7"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb248-7"></a><span class="kw">rbind</span>(</span>
<span id="cb248-8"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb248-8"></a>  exam_results_tidy, </span>
<span id="cb248-9"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb248-9"></a>  new_exam_results_tidy</span>
<span id="cb248-10"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb248-10"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 9 × 3
##   student  exam    grade
##   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;
## 1 Rozz     midterm   1.3
## 2 Andrew   midterm   2  
## 3 Siouxsie midterm   1.7
## 4 Rozz     final     2.3
## 5 Andrew   final     1.7
## 6 Siouxsie final     1  
## 7 Rozz     bonus     1.7
## 8 Andrew   bonus     2.3
## 9 Siouxsie bonus     1</code></pre>
<p>If two data sets have information in common, and the combination should respect that commonality, the <code>join</code> family of functions is of great help. Consider the case of distributed information again that we looked at to understand the third constraint of the concept of “tidy data”. There are two tibbles, both of which contain information about the same students. They share the column <code>student</code> (this does not necessarily have to be in the same order!) and we might want to join the information from both sources into a single (messy but almost tidy) representation, using <code>full_join</code>. We have seen an example already, which is repeated here:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-1"></a><span class="co"># same as before</span></span>
<span id="cb250-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-2"></a>exam_results_tidy &lt;-<span class="st"> </span><span class="kw">tribble</span>(</span>
<span id="cb250-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-3"></a>  <span class="op">~</span>student,    <span class="op">~</span>exam,      <span class="op">~</span>grade,</span>
<span id="cb250-4"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-4"></a>  <span class="st">&quot;Rozz&quot;</span>,      <span class="st">&quot;midterm&quot;</span>,  <span class="fl">1.3</span>,</span>
<span id="cb250-5"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-5"></a>  <span class="st">&quot;Andrew&quot;</span>,    <span class="st">&quot;midterm&quot;</span>,  <span class="fl">2.0</span>,</span>
<span id="cb250-6"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-6"></a>  <span class="st">&quot;Siouxsie&quot;</span>,  <span class="st">&quot;midterm&quot;</span>,  <span class="fl">1.7</span>,</span>
<span id="cb250-7"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-7"></a>  <span class="st">&quot;Rozz&quot;</span>,      <span class="st">&quot;final&quot;</span>,    <span class="fl">2.3</span>,</span>
<span id="cb250-8"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-8"></a>  <span class="st">&quot;Andrew&quot;</span>,    <span class="st">&quot;final&quot;</span>,    <span class="fl">1.7</span>,</span>
<span id="cb250-9"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-9"></a>  <span class="st">&quot;Siouxsie&quot;</span>,  <span class="st">&quot;final&quot;</span>,    <span class="fl">1.0</span></span>
<span id="cb250-10"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-10"></a>)</span>
<span id="cb250-11"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-11"></a><span class="co"># additional table with student numbers</span></span>
<span id="cb250-12"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-12"></a>student_numbers &lt;-<span class="st"> </span><span class="kw">tribble</span>(</span>
<span id="cb250-13"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-13"></a>  <span class="op">~</span>student,    <span class="op">~</span>student_number,</span>
<span id="cb250-14"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-14"></a>  <span class="st">&quot;Rozz&quot;</span>,      <span class="st">&quot;666&quot;</span>,   </span>
<span id="cb250-15"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-15"></a>  <span class="st">&quot;Andrew&quot;</span>,    <span class="st">&quot;1969&quot;</span>,</span>
<span id="cb250-16"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-16"></a>  <span class="st">&quot;Siouxsie&quot;</span>,  <span class="st">&quot;3.14&quot;</span></span>
<span id="cb250-17"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-17"></a>)</span>
<span id="cb250-18"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb250-18"></a><span class="kw">full_join</span>(exam_results_tidy, student_numbers, <span class="dt">by =</span> <span class="st">&quot;student&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   student  exam    grade student_number
##   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;         
## 1 Rozz     midterm   1.3 666           
## 2 Andrew   midterm   2   1969          
## 3 Siouxsie midterm   1.7 3.14          
## 4 Rozz     final     2.3 666           
## 5 Andrew   final     1.7 1969          
## 6 Siouxsie final     1   3.14</code></pre>
<p>If two data sets are to be joined by a column that is not exactly shared by both sets (one contains entries in this column that the other doesn’t) then a <code>full_join</code> will retain all information from both. If that is not what you want, check out alternative functions like <code>right_join</code>, <code>semi_join</code> etc. using the <a href="https://rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">data wrangling cheat sheet</a>.</p>
<div class="exercises">
<p><strong>Exercise 4.2: Data Wrangling in R</strong></p>
<p>We are working with the same example as in the earlier exercise:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb252-1"></a>data &lt;-<span class="st"> </span><span class="kw">tribble</span>(</span>
<span id="cb252-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb252-2"></a><span class="op">~</span>subject_id,  <span class="op">~</span>choices,  <span class="op">~</span>reaction_times, </span>
<span id="cb252-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb252-3"></a><span class="dv">1</span>,            <span class="st">&quot;A,B,B&quot;</span>,   <span class="st">&quot;312 433 365&quot;</span>, </span>
<span id="cb252-4"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb252-4"></a><span class="dv">2</span>,            <span class="st">&quot;B,A,B&quot;</span>,   <span class="st">&quot;393 491 327&quot;</span>,</span>
<span id="cb252-5"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb252-5"></a><span class="dv">3</span>,            <span class="st">&quot;B,A,A&quot;</span>,   <span class="st">&quot;356 313 475&quot;</span>, </span>
<span id="cb252-6"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb252-6"></a><span class="dv">4</span>,            <span class="st">&quot;A,B,B&quot;</span>,   <span class="st">&quot;292 352 378&quot;</span> </span>
<span id="cb252-7"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb252-7"></a>)</span></code></pre></div>
<p>Take a look at the following code snippet. Explain what the individual parts (indicated by the numbers) do. What will the result look like?</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb253-1"></a>choice_data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb253-2"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb253-2"></a><span class="co">#1 </span></span>
<span id="cb253-3"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb253-3"></a><span class="kw">select</span>(subject_id, choices) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb253-4"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb253-4"></a><span class="co">#2</span></span>
<span id="cb253-5"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb253-5"></a><span class="kw">separate</span>(</span>
<span id="cb253-6"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb253-6"></a>  <span class="dt">col =</span> choices,</span>
<span id="cb253-7"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb253-7"></a>  <span class="dt">into =</span> <span class="kw">str_c</span>(<span class="st">&quot;C_&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>),  </span>
<span id="cb253-8"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb253-8"></a>  <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb253-9"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb253-9"></a><span class="co">#3 </span></span>
<span id="cb253-10"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb253-10"></a><span class="kw">pivot_longer</span>( </span>
<span id="cb253-11"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb253-11"></a>  <span class="dt">cols =</span> <span class="dv">-1</span>, </span>
<span id="cb253-12"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb253-12"></a>  <span class="dt">names_to =</span> <span class="st">&quot;condition&quot;</span>,</span>
<span id="cb253-13"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb253-13"></a>  <span class="dt">values_to =</span> <span class="st">&quot;response&quot;</span>)</span></code></pre></div>
<div class="collapsibleSolution">
<button class="trigger">
Solution
</button>
<div class="content">
<ol style="list-style-type: decimal">
<li><p>Selecting two columns (<code>subject_id</code> and <code>choices</code>) out of the data set.</p></li>
<li><p>In the data set, each cell in the <code>choices</code> column contains more than one value. To separate them, we take this column and divide the strings by the “,”. The names are then given for each line from one to three.</p></li>
<li><p>Now we are making the data set longer, so that each condition is its own row. We are pivoting each column apart from the first. The names of the columns are combined in a column called <code>condition</code> and the values are put into a column called <code>response</code>.</p></li>
</ol>
<p>The result:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="Chap-02-02-data-preprocessing-cleaning.html#cb254-1"></a>choice_data</span></code></pre></div>
<pre><code>## # A tibble: 12 × 3
##    subject_id condition response
##         &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;   
##  1          1 C_1       A       
##  2          1 C_2       B       
##  3          1 C_3       B       
##  4          2 C_1       B       
##  5          2 C_2       A       
##  6          2 C_3       B       
##  7          3 C_1       B       
##  8          3 C_2       A       
##  9          3 C_3       A       
## 10          4 C_1       A       
## 11          4 C_2       B       
## 12          4 C_3       B</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="18">
<li id="fn18"><p>There are alternative possibilities for specifying names of the value and name column, which allow for more dynamic construction of strings. We will not cover all of these details here, but we will use some of these alternative specifications in subsequent examples.<a href="Chap-02-02-data-preprocessing-cleaning.html#fnref18" class="footnote-back">↩︎</a></p></li>
<li id="fn19"><p>The helpers from the <code>tidyselect</code> package also accept regular expressions.<a href="Chap-02-02-data-preprocessing-cleaning.html#fnref19" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Chap-02-02-data-tidy-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Chap-02-02-data-grouping-nesting.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
