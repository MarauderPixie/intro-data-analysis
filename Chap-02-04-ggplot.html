<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6.3 Basics of ggplot | Introduction to Data Analysis</title>
  <meta name="description" content="Course Material for I2DA-2019 in Cognitive Science at University Osnabrück" />
  <meta name="generator" content="bookdown 0.20.6 and GitBook 2.6.7" />

  <meta property="og:title" content="6.3 Basics of ggplot | Introduction to Data Analysis" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Course Material for I2DA-2019 in Cognitive Science at University Osnabrück" />
  <meta name="github-repo" content="michael-franke/intro-data-analysis" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6.3 Basics of ggplot | Introduction to Data Analysis" />
  
  <meta name="twitter:description" content="Course Material for I2DA-2019 in Cognitive Science at University Osnabrück" />
  

<meta name="author" content="Michael Franke" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Chap-02-04-good-visualization.html"/>
<link rel="next" href="Chap-02-04-geoms.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<!--<link rel="stylesheet" href="https://s3-us-west-2.amazonaws.com/cdn.webppl.org/webppl-editor-1.0.9.css">-->
<link rel="stylesheet" href="https://s3-us-west-2.amazonaws.com/cdn.webppl.org/webppl-viz-0.7.11.css">

<script src="https://s3-us-west-2.amazonaws.com/cdn.webppl.org/webppl-editor-1.0.9.js"></script>
<script src="https://s3-us-west-2.amazonaws.com/cdn.webppl.org/webppl-viz-0.7.11.js"></script>
<script src="https://s3-us-west-2.amazonaws.com/cdn.webppl.org/webppl-v0.9.13.js" defer async></script>

<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/envisioned.css" rel="stylesheet" />

<script type="application/javascript">
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.collapsibleSolution').forEach(function(collapsible) {
    const content = collapsible.querySelector('.content')
    content.style.display = 'none';
    collapsible.querySelector('.trigger').addEventListener('click', function() {
      if (content.style.display === 'none') {
        content.style.display = 'block';
      } else {
        content.style.display = 'none';
      }
    })
  })
})
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />
<link rel="stylesheet" href="webppl-editor.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="part"><span><b>I Preliminaries</b></span></li>
<li class="chapter" data-level="1" data-path="general-introduction.html"><a href="general-introduction.html"><i class="fa fa-check"></i><b>1</b> General Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="Chap-01-00-intro-learning-goals.html"><a href="Chap-01-00-intro-learning-goals.html"><i class="fa fa-check"></i><b>1.1</b> Learning goals</a></li>
<li class="chapter" data-level="1.2" data-path="Chap-01-00-intro-course-structure.html"><a href="Chap-01-00-intro-course-structure.html"><i class="fa fa-check"></i><b>1.2</b> Course structure</a></li>
<li class="chapter" data-level="1.3" data-path="Chap-01-00-intro-tools-methods.html"><a href="Chap-01-00-intro-tools-methods.html"><i class="fa fa-check"></i><b>1.3</b> Tools and topics covered (and not covered) in the course</a></li>
<li class="chapter" data-level="1.4" data-path="Chap-01-00-intro-data-sets.html"><a href="Chap-01-00-intro-data-sets.html"><i class="fa fa-check"></i><b>1.4</b> Data sets covered</a></li>
<li class="chapter" data-level="1.5" data-path="Chap-01-00-intro-installation.html"><a href="Chap-01-00-intro-installation.html"><i class="fa fa-check"></i><b>1.5</b> Installation</a><ul>
<li class="chapter" data-level="1.5.1" data-path="Chap-01-00-intro-installation.html"><a href="Chap-01-00-intro-installation.html#Chap-01-00-intro-installation-VirtualBox"><i class="fa fa-check"></i><b>1.5.1</b> VirtualBox Setup</a></li>
<li class="chapter" data-level="1.5.2" data-path="Chap-01-00-intro-installation.html"><a href="Chap-01-00-intro-installation.html#Chap-01-00-intro-installation-Manual"><i class="fa fa-check"></i><b>1.5.2</b> Manual installation</a></li>
<li class="chapter" data-level="1.5.3" data-path="Chap-01-00-intro-installation.html"><a href="Chap-01-00-intro-installation.html#Chap-01-00-intro-installation-Updating"><i class="fa fa-check"></i><b>1.5.3</b> Updating the course package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Chap-01-01-R.html"><a href="Chap-01-01-R.html"><i class="fa fa-check"></i><b>2</b> Basics of R</a><ul>
<li class="chapter" data-level="2.1" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html"><i class="fa fa-check"></i><b>2.1</b> First steps</a><ul>
<li class="chapter" data-level="2.1.1" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#functions"><i class="fa fa-check"></i><b>2.1.1</b> Functions</a></li>
<li class="chapter" data-level="2.1.2" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#variables"><i class="fa fa-check"></i><b>2.1.2</b> Variables</a></li>
<li class="chapter" data-level="2.1.3" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#literate-coding"><i class="fa fa-check"></i><b>2.1.3</b> Literate coding</a></li>
<li class="chapter" data-level="2.1.4" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#objects"><i class="fa fa-check"></i><b>2.1.4</b> Objects</a></li>
<li class="chapter" data-level="2.1.5" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#packages"><i class="fa fa-check"></i><b>2.1.5</b> Packages</a></li>
<li class="chapter" data-level="2.1.6" data-path="ch1-first-steps.html"><a href="ch1-first-steps.html#Chap-01-01-R-help"><i class="fa fa-check"></i><b>2.1.6</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="ch1-data-types.html"><a href="ch1-data-types.html"><i class="fa fa-check"></i><b>2.2</b> Data types</a><ul>
<li class="chapter" data-level="2.2.1" data-path="ch1-data-types.html"><a href="ch1-data-types.html#numeric-vectors-matrices"><i class="fa fa-check"></i><b>2.2.1</b> Numeric vectors &amp; matrices</a></li>
<li class="chapter" data-level="2.2.2" data-path="ch1-data-types.html"><a href="ch1-data-types.html#booleans"><i class="fa fa-check"></i><b>2.2.2</b> Booleans</a></li>
<li class="chapter" data-level="2.2.3" data-path="ch1-data-types.html"><a href="ch1-data-types.html#special-values"><i class="fa fa-check"></i><b>2.2.3</b> Special values</a></li>
<li class="chapter" data-level="2.2.4" data-path="ch1-data-types.html"><a href="ch1-data-types.html#characters-strings"><i class="fa fa-check"></i><b>2.2.4</b> Characters (= strings)</a></li>
<li class="chapter" data-level="2.2.5" data-path="ch1-data-types.html"><a href="ch1-data-types.html#factors"><i class="fa fa-check"></i><b>2.2.5</b> Factors</a></li>
<li class="chapter" data-level="2.2.6" data-path="ch1-data-types.html"><a href="ch1-data-types.html#lists-data-frames-tibbles"><i class="fa fa-check"></i><b>2.2.6</b> Lists, data frames &amp; tibbles</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="Chap-01-01-functions.html"><a href="Chap-01-01-functions.html"><i class="fa fa-check"></i><b>2.3</b> Functions</a><ul>
<li class="chapter" data-level="2.3.1" data-path="Chap-01-01-functions.html"><a href="Chap-01-01-functions.html#some-important-built-in-functions"><i class="fa fa-check"></i><b>2.3.1</b> Some important built-in functions</a></li>
<li class="chapter" data-level="2.3.2" data-path="Chap-01-01-functions.html"><a href="Chap-01-01-functions.html#defining-your-own-functions"><i class="fa fa-check"></i><b>2.3.2</b> Defining your own functions</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="ch-01-01-loops-and-maps.html"><a href="ch-01-01-loops-and-maps.html"><i class="fa fa-check"></i><b>2.4</b> Loops and maps</a></li>
<li class="chapter" data-level="2.5" data-path="Chap-01-01-piping.html"><a href="Chap-01-01-piping.html"><i class="fa fa-check"></i><b>2.5</b> Piping</a></li>
<li class="chapter" data-level="2.6" data-path="ch-01-01-Rmarkdown.html"><a href="ch-01-01-Rmarkdown.html"><i class="fa fa-check"></i><b>2.6</b> Rmarkdown</a></li>
</ul></li>
<li class="part"><span><b>II Data</b></span></li>
<li class="chapter" data-level="3" data-path="Chap-02-01-data.html"><a href="Chap-02-01-data.html"><i class="fa fa-check"></i><b>3</b> Data, variables &amp; experimental designs</a><ul>
<li class="chapter" data-level="3.1" data-path="Chap-02-01-data-kinds-of-data.html"><a href="Chap-02-01-data-kinds-of-data.html"><i class="fa fa-check"></i><b>3.1</b> Different kinds of data</a></li>
<li class="chapter" data-level="3.2" data-path="Chap-02-01-data-variables.html"><a href="Chap-02-01-data-variables.html"><i class="fa fa-check"></i><b>3.2</b> On the notion of “variables”</a></li>
<li class="chapter" data-level="3.3" data-path="Chap-02-01-data-exp-design.html"><a href="Chap-02-01-data-exp-design.html"><i class="fa fa-check"></i><b>3.3</b> Basics of experimental design</a><ul>
<li class="chapter" data-level="3.3.1" data-path="Chap-02-01-data-exp-design.html"><a href="Chap-02-01-data-exp-design.html#what-to-analyze-dependent-variables"><i class="fa fa-check"></i><b>3.3.1</b> What to analyze? – Dependent variables</a></li>
<li class="chapter" data-level="3.3.2" data-path="Chap-02-01-data-exp-design.html"><a href="Chap-02-01-data-exp-design.html#conditions-trials-items"><i class="fa fa-check"></i><b>3.3.2</b> Conditions, trials, items</a></li>
<li class="chapter" data-level="3.3.3" data-path="Chap-02-01-data-exp-design.html"><a href="Chap-02-01-data-exp-design.html#sample-size"><i class="fa fa-check"></i><b>3.3.3</b> Sample size</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>4</b> Data Wrangling</a><ul>
<li class="chapter" data-level="4.1" data-path="Chap-02-02-data-IO.html"><a href="Chap-02-02-data-IO.html"><i class="fa fa-check"></i><b>4.1</b> Data in, data out</a></li>
<li class="chapter" data-level="4.2" data-path="Chap-02-02-data-tidy-data.html"><a href="Chap-02-02-data-tidy-data.html"><i class="fa fa-check"></i><b>4.2</b> Tidy data</a><ul>
<li class="chapter" data-level="4.2.1" data-path="Chap-02-02-data-tidy-data.html"><a href="Chap-02-02-data-tidy-data.html#running-example"><i class="fa fa-check"></i><b>4.2.1</b> Running example</a></li>
<li class="chapter" data-level="4.2.2" data-path="Chap-02-02-data-tidy-data.html"><a href="Chap-02-02-data-tidy-data.html#definition-of-tidy-data"><i class="fa fa-check"></i><b>4.2.2</b> Definition of <em>tidy data</em></a></li>
<li class="chapter" data-level="4.2.3" data-path="Chap-02-02-data-tidy-data.html"><a href="Chap-02-02-data-tidy-data.html#excursion-non-redundant-data"><i class="fa fa-check"></i><b>4.2.3</b> Excursion: non-redundant data</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html"><i class="fa fa-check"></i><b>4.3</b> Data manipulation: the basics</a><ul>
<li class="chapter" data-level="4.3.1" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#pivoting"><i class="fa fa-check"></i><b>4.3.1</b> Pivoting</a></li>
<li class="chapter" data-level="4.3.2" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#subsetting-row-columns"><i class="fa fa-check"></i><b>4.3.2</b> Subsetting row &amp; columns</a></li>
<li class="chapter" data-level="4.3.3" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#Chap-02-02-tidy-selection"><i class="fa fa-check"></i><b>4.3.3</b> Tidy selection of column names</a></li>
<li class="chapter" data-level="4.3.4" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#adding-changing-and-renaming-columns"><i class="fa fa-check"></i><b>4.3.4</b> Adding, changing and renaming columns</a></li>
<li class="chapter" data-level="4.3.5" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#splitting-and-uniting-columns"><i class="fa fa-check"></i><b>4.3.5</b> Splitting and uniting columns</a></li>
<li class="chapter" data-level="4.3.6" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#sorting-a-data-set"><i class="fa fa-check"></i><b>4.3.6</b> Sorting a data set</a></li>
<li class="chapter" data-level="4.3.7" data-path="Chap-02-02-data-preprocessing-cleaning.html"><a href="Chap-02-02-data-preprocessing-cleaning.html#combining-tibbles"><i class="fa fa-check"></i><b>4.3.7</b> Combining tibbles</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="Chap-02-02-data-grouping-nesting.html"><a href="Chap-02-02-data-grouping-nesting.html"><i class="fa fa-check"></i><b>4.4</b> Grouped operations</a></li>
<li class="chapter" data-level="4.5" data-path="Chap-02-02-data-case-study-KoF.html"><a href="Chap-02-02-data-case-study-KoF.html"><i class="fa fa-check"></i><b>4.5</b> Case study: the King of France</a><ul>
<li class="chapter" data-level="4.5.1" data-path="Chap-02-02-data-case-study-KoF.html"><a href="Chap-02-02-data-case-study-KoF.html#cleaning-the-data"><i class="fa fa-check"></i><b>4.5.1</b> Cleaning the data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Chap-02-03-summary-statistics.html"><a href="Chap-02-03-summary-statistics.html"><i class="fa fa-check"></i><b>5</b> Summary statistics</a><ul>
<li class="chapter" data-level="5.1" data-path="Chap-02-03-summary-statistics-counts.html"><a href="Chap-02-03-summary-statistics-counts.html"><i class="fa fa-check"></i><b>5.1</b> Counts and proportions</a><ul>
<li class="chapter" data-level="5.1.1" data-path="Chap-02-03-summary-statistics-counts.html"><a href="Chap-02-03-summary-statistics-counts.html#loading-and-inspecting-the-data"><i class="fa fa-check"></i><b>5.1.1</b> Loading and inspecting the data</a></li>
<li class="chapter" data-level="5.1.2" data-path="Chap-02-03-summary-statistics-counts.html"><a href="Chap-02-03-summary-statistics-counts.html#obtaining-counts-with-n-count-and-tally"><i class="fa fa-check"></i><b>5.1.2</b> Obtaining counts with <code>n</code>, <code>count</code> and <code>tally</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html"><i class="fa fa-check"></i><b>5.2</b> Central tendency and dispersion</a><ul>
<li class="chapter" data-level="5.2.1" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html#the-data-for-the-remainder-of-the-chapter"><i class="fa fa-check"></i><b>5.2.1</b> The data for the remainder of the chapter</a></li>
<li class="chapter" data-level="5.2.2" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>5.2.2</b> Measures of central tendency</a></li>
<li class="chapter" data-level="5.2.3" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html#measures-of-dispersion"><i class="fa fa-check"></i><b>5.2.3</b> Measures of dispersion</a></li>
<li class="chapter" data-level="5.2.4" data-path="Chap-02-03-summary-statistics-1D.html"><a href="Chap-02-03-summary-statistics-1D.html#quantifying-confidence-with-bootstrapping"><i class="fa fa-check"></i><b>5.2.4</b> Quantifying confidence with bootstrapping</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="Chap-02-03-summary-statistics-2D.html"><a href="Chap-02-03-summary-statistics-2D.html"><i class="fa fa-check"></i><b>5.3</b> Covariance and correlation</a><ul>
<li class="chapter" data-level="5.3.1" data-path="Chap-02-03-summary-statistics-2D.html"><a href="Chap-02-03-summary-statistics-2D.html#covariance"><i class="fa fa-check"></i><b>5.3.1</b> Covariance</a></li>
<li class="chapter" data-level="5.3.2" data-path="Chap-02-03-summary-statistics-2D.html"><a href="Chap-02-03-summary-statistics-2D.html#correlation"><i class="fa fa-check"></i><b>5.3.2</b> Correlation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="Chap-02-02-visualization.html"><a href="Chap-02-02-visualization.html"><i class="fa fa-check"></i><b>6</b> Data Visualization</a><ul>
<li class="chapter" data-level="6.1" data-path="Chap-02-04-Anscombe-example.html"><a href="Chap-02-04-Anscombe-example.html"><i class="fa fa-check"></i><b>6.1</b> Motivating example: Anscombe’s quartet</a></li>
<li class="chapter" data-level="6.2" data-path="Chap-02-04-good-visualization.html"><a href="Chap-02-04-good-visualization.html"><i class="fa fa-check"></i><b>6.2</b> Visualization: the good, the bad and the info-graphic</a></li>
<li class="chapter" data-level="6.3" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html"><i class="fa fa-check"></i><b>6.3</b> Basics of <code>ggplot</code></a><ul>
<li class="chapter" data-level="6.3.1" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#incrementally-composition-of-a-plot"><i class="fa fa-check"></i><b>6.3.1</b> Incrementally composition of a plot</a></li>
<li class="chapter" data-level="6.3.2" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#elements-in-the-layered-grammar-of-graphs"><i class="fa fa-check"></i><b>6.3.2</b> Elements in the layered grammar of graphs</a></li>
<li class="chapter" data-level="6.3.3" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#layers-and-groups"><i class="fa fa-check"></i><b>6.3.3</b> Layers and groups</a></li>
<li class="chapter" data-level="6.3.4" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#grouping"><i class="fa fa-check"></i><b>6.3.4</b> Grouping</a></li>
<li class="chapter" data-level="6.3.5" data-path="Chap-02-04-ggplot.html"><a href="Chap-02-04-ggplot.html#example-of-a-customized-plot"><i class="fa fa-check"></i><b>6.3.5</b> Example of a customized plot</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html"><i class="fa fa-check"></i><b>6.4</b> A rendezvous with popular geoms</a><ul>
<li class="chapter" data-level="6.4.1" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#scatter-plots-with-geom_point"><i class="fa fa-check"></i><b>6.4.1</b> Scatter plots with <code>geom_point</code></a></li>
<li class="chapter" data-level="6.4.2" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#smooth"><i class="fa fa-check"></i><b>6.4.2</b> Smooth</a></li>
<li class="chapter" data-level="6.4.3" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#line"><i class="fa fa-check"></i><b>6.4.3</b> Line</a></li>
<li class="chapter" data-level="6.4.4" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#barplot"><i class="fa fa-check"></i><b>6.4.4</b> Barplot</a></li>
<li class="chapter" data-level="6.4.5" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#plotting-distributions-histograms-boxplots-densities-and-violins"><i class="fa fa-check"></i><b>6.4.5</b> Plotting distributions: histograms, boxplots, densities and violins</a></li>
<li class="chapter" data-level="6.4.6" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#rugs"><i class="fa fa-check"></i><b>6.4.6</b> Rugs</a></li>
<li class="chapter" data-level="6.4.7" data-path="Chap-02-04-geoms.html"><a href="Chap-02-04-geoms.html#annotation"><i class="fa fa-check"></i><b>6.4.7</b> Annotation</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="Chap-02-04-faceting.html"><a href="Chap-02-04-faceting.html"><i class="fa fa-check"></i><b>6.5</b> Faceting</a></li>
<li class="chapter" data-level="6.6" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html"><i class="fa fa-check"></i><b>6.6</b> Customization etc.</a><ul>
<li class="chapter" data-level="6.6.1" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#themes"><i class="fa fa-check"></i><b>6.6.1</b> Themes</a></li>
<li class="chapter" data-level="6.6.2" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#guides"><i class="fa fa-check"></i><b>6.6.2</b> Guides</a></li>
<li class="chapter" data-level="6.6.3" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#axes-ticks-and-tick-labels"><i class="fa fa-check"></i><b>6.6.3</b> Axes, ticks and tick labels</a></li>
<li class="chapter" data-level="6.6.4" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#labels"><i class="fa fa-check"></i><b>6.6.4</b> Labels</a></li>
<li class="chapter" data-level="6.6.5" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#combining-arranging-plots"><i class="fa fa-check"></i><b>6.6.5</b> Combining &amp; arranging plots</a></li>
<li class="chapter" data-level="6.6.6" data-path="Chap-02-04-customization.html"><a href="Chap-02-04-customization.html#latex-expressions-in-plot-labels"><i class="fa fa-check"></i><b>6.6.6</b> LaTeX expressions in plot labels</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Models and inferences</b></span></li>
<li class="chapter" data-level="7" data-path="Chap-03-01-probability.html"><a href="Chap-03-01-probability.html"><i class="fa fa-check"></i><b>7</b> Basics of Probability Theory</a><ul>
<li class="chapter" data-level="7.1" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html"><i class="fa fa-check"></i><b>7.1</b> Probability</a><ul>
<li class="chapter" data-level="7.1.1" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html#outcomes-events-observations"><i class="fa fa-check"></i><b>7.1.1</b> Outcomes, events, observations</a></li>
<li class="chapter" data-level="7.1.2" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html#probability-distributions"><i class="fa fa-check"></i><b>7.1.2</b> Probability distributions</a></li>
<li class="chapter" data-level="7.1.3" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html#interpretations-of-probability"><i class="fa fa-check"></i><b>7.1.3</b> Interpretations of probability</a></li>
<li class="chapter" data-level="7.1.4" data-path="Chap-03-01-probability-basics.html"><a href="Chap-03-01-probability-basics.html#distributions-as-samples"><i class="fa fa-check"></i><b>7.1.4</b> Distributions as samples</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="Chap-03-01-probability-marginal.html"><a href="Chap-03-01-probability-marginal.html"><i class="fa fa-check"></i><b>7.2</b> Structured events &amp; marginal distributions</a><ul>
<li class="chapter" data-level="7.2.1" data-path="Chap-03-01-probability-marginal.html"><a href="Chap-03-01-probability-marginal.html#probability-table-for-a-flip-and-draw-scenario"><i class="fa fa-check"></i><b>7.2.1</b> Probability table for a flip-and-draw scenario</a></li>
<li class="chapter" data-level="7.2.2" data-path="Chap-03-01-probability-marginal.html"><a href="Chap-03-01-probability-marginal.html#structured-events-and-joint-probability-distributions"><i class="fa fa-check"></i><b>7.2.2</b> Structured events and joint-probability distributions</a></li>
<li class="chapter" data-level="7.2.3" data-path="Chap-03-01-probability-marginal.html"><a href="Chap-03-01-probability-marginal.html#marginalization"><i class="fa fa-check"></i><b>7.2.3</b> Marginalization</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="Chap-03-01-probability-conditional.html"><a href="Chap-03-01-probability-conditional.html"><i class="fa fa-check"></i><b>7.3</b> Conditional probability</a><ul>
<li class="chapter" data-level="7.3.1" data-path="Chap-03-01-probability-conditional.html"><a href="Chap-03-01-probability-conditional.html#bayes-rule"><i class="fa fa-check"></i><b>7.3.1</b> Bayes rule</a></li>
<li class="chapter" data-level="7.3.2" data-path="Chap-03-01-probability-conditional.html"><a href="Chap-03-01-probability-conditional.html#Chap-03-01-probability-independence"><i class="fa fa-check"></i><b>7.3.2</b> Stochastic (in-)dependence</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html"><i class="fa fa-check"></i><b>7.4</b> Random variables</a><ul>
<li class="chapter" data-level="7.4.1" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html#notation-terminology"><i class="fa fa-check"></i><b>7.4.1</b> Notation &amp; terminology</a></li>
<li class="chapter" data-level="7.4.2" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html#cumulative-distribution-functions-mass-density"><i class="fa fa-check"></i><b>7.4.2</b> Cumulative distribution functions, mass &amp; density</a></li>
<li class="chapter" data-level="7.4.3" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html#expected-value-variance"><i class="fa fa-check"></i><b>7.4.3</b> Expected value &amp; variance</a></li>
<li class="chapter" data-level="7.4.4" data-path="Chap-03-01-probability-random-variables.html"><a href="Chap-03-01-probability-random-variables.html#composite-random-variables"><i class="fa fa-check"></i><b>7.4.4</b> Composite random variables</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="Chap-03-01-probability-R.html"><a href="Chap-03-01-probability-R.html"><i class="fa fa-check"></i><b>7.5</b> Probability distributions in R</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Data Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Chap-02-04-ggplot" class="section level2">
<h2><span class="header-section-number">6.3</span> Basics of <code>ggplot</code></h2>
<p>In this section we will work towards a first plot with <code>ggplot</code>. It will be a scatter plot (more on different kinds of plots in Section <a href="Chap-02-04-geoms.html#Chap-02-04-geoms">6.4</a>) for the <a href="app-93-data-sets-avocado">avocado price data</a>. Check out the <a href="https://rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">ggplot cheat sheet</a> for a quick overview of the nuts and bolts of ggplot.</p>
<p>The following introduces the key concepts of <code>ggplot</code>:</p>
<ul>
<li><strong>incremental composition</strong>: adding elements or changing attributes of a plot incrementally</li>
<li><strong>convenience functions &amp; defaults</strong>: a closer look at high-level convenience functions (like <code>geom_point</code>) and what they actually do</li>
<li><strong>layers</strong>: seeing how layers are stacked when we call, e.g. different <code>geom_</code> functions in sequence</li>
<li><strong>grouping</strong>: what happens when we use grouping information (e.g., for color, shape or in facets)</li>
</ul>
<p>The section finishes with a first full example of plot that has different layers, uses grouping, and customizes a few other things.</p>
<div id="incrementally-composition-of-a-plot" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Incrementally composition of a plot</h3>
<p>The “gg” in the package name <code>ggplot</code> is short for “grammar of graphs”. It provides functions for describing scientific data plots in a compositional manner, i.e., for dealing with different recurrent elements in a plot in an additive way. As a results of this approach, we will use the symbol <code>+</code> to <em>add</em> more and more elements (or to override the implicit defaults in previously evoked elements) to build a plot. For example, we can obtain a scatter plot for the <a href="app-93-data-sets-avocado">avocado price data</a> simply by first calling the function <code>ggplot</code>, which just creates an empty plot:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb298-1" data-line-number="1">incrementally_built_plot &lt;-<span class="st"> </span><span class="kw">ggplot</span>()</a></code></pre></div>
<p>The plot stored in variable <code>incrementally_built_plot</code> is very boring. Take a look:</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb299-1" data-line-number="1">incrementally_built_plot</a></code></pre></div>
<p><img src="I2DA_files/figure-html/unnamed-chunk-177-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>As you can see, you do not see anything except a (white) canvas. But we can add some stuff. Don’t get hung up on the details right now, just notice that we use <code>+</code> to add stuff to our plot:<a href="#fn24" class="footnote-ref" id="fnref24"><sup>24</sup></a></p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb300-1" data-line-number="1">incrementally_built_plot <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb300-2" data-line-number="2"><span class="st">  </span><span class="co"># add a geom of type `point` (=&gt; scatter plot)</span></a>
<a class="sourceLine" id="cb300-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>(</a>
<a class="sourceLine" id="cb300-4" data-line-number="4">    <span class="co"># what data to use</span></a>
<a class="sourceLine" id="cb300-5" data-line-number="5">    <span class="dt">data =</span> avocado_data, </a>
<a class="sourceLine" id="cb300-6" data-line-number="6">    <span class="co"># supply a mapping (in the form of an &#39;aesthetic&#39; (see below))</span></a>
<a class="sourceLine" id="cb300-7" data-line-number="7">    <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb300-8" data-line-number="8">      <span class="co"># which variable to map onto the x-axis</span></a>
<a class="sourceLine" id="cb300-9" data-line-number="9">      <span class="dt">x =</span> total_volume_sold,</a>
<a class="sourceLine" id="cb300-10" data-line-number="10">      <span class="co"># which variable to map onto the y-axis</span></a>
<a class="sourceLine" id="cb300-11" data-line-number="11">      <span class="dt">y =</span> average_price</a>
<a class="sourceLine" id="cb300-12" data-line-number="12">      )</a>
<a class="sourceLine" id="cb300-13" data-line-number="13">  )</a></code></pre></div>
<p><img src="I2DA_files/figure-html/unnamed-chunk-178-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>You see that the function <code>geom_point</code> is what makes the points appear. You tell it which data to use and which mapping of variables from the data set to elements in the plot you like. That’s it, at least to begin with.</p>
<p>We can also supply the information about the data to use and the aesthetic mapping in the call to function <code>ggplot</code>. Doing so will make this information the default for any subsequently added layer. Notice also that the <code>data</code> argument in function <code>ggplot</code> is the first argument, so we will frequently make use of piping, like in the following code which is equivalent to the previous in terms of output:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb301-1" data-line-number="1">avocado_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb301-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> total_volume_sold, <span class="dt">y =</span> average_price)) <span class="op">+</span></a>
<a class="sourceLine" id="cb301-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="I2DA_files/figure-html/unnamed-chunk-179-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="elements-in-the-layered-grammar-of-graphs" class="section level3">
<h3><span class="header-section-number">6.3.2</span> Elements in the layered grammar of graphs</h3>
<p>Let’s take a step back. Actually, the function <code>geom_point</code> is a convenience function that does a lot of things automatically for us. It helps understanding subsequent code if we peak under the hood at least for a brief moment initially, if only to just realize where some of the terminology in and round the “grammar of graphs” comes from.</p>
<p>The <code>ggplot</code> package defines a <strong>layered grammar of graphs</strong> <span class="citation">(Wickham <a href="#ref-Wickham2010:A-Layered-Gramm">2010</a>)</span>. This is a structured description language for plots (relevant for data science). It uses a smart system of defaults so that it suffices to often just call a convenience wrapper like <code>geom_point</code>. But underneath there is the possibility of tinkering with (almost?) all of the (layered) elements and to change the defaults if need be.</p>
<p>The process of mapping data onto a visualization essentially follows this route:</p>
<blockquote>
<p>data -&gt; statistical transformation -&gt; geom. object -&gt; aesthetics</p>
</blockquote>
<p>You supply (tidy) data. The data is then transformed (e.g., by computing a summary statistic) in some way or another. This could just be an “identity map” in which case you will visualize the data exactly as it is. The resulting data representation is mapped onto some spatial (geometric) appearance, like a line, a dot, or a geometric shape. Finally, there is room to alter the specific aesthetics of this mapping from data to visual object, like adjusting the size or the color of a geometric object, possibly depending on some other properties it has (e.g., whether it is an observation for a conventional or an organically grown avocado).</p>
<p>To make explicit the steps which are implicitly carried out by <code>geom_points</code> in the example above, here is a fully verbose but output-equivalent sequence of commands that builds the same plot by defining all the basic components manually:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb302-1" data-line-number="1">avocado_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb302-2" data-line-number="2"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb302-3" data-line-number="3"><span class="st">  </span><span class="co"># plot consists of layers (more on this soon)</span></a>
<a class="sourceLine" id="cb302-4" data-line-number="4"><span class="st">  </span><span class="kw">layer</span>(</a>
<a class="sourceLine" id="cb302-5" data-line-number="5">    <span class="co"># how to map columns onto ingredients in the plot</span></a>
<a class="sourceLine" id="cb302-6" data-line-number="6">    <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> total_volume_sold, <span class="dt">y =</span> average_price),</a>
<a class="sourceLine" id="cb302-7" data-line-number="7">    <span class="co"># what statistical transformation should be used? - here: none</span></a>
<a class="sourceLine" id="cb302-8" data-line-number="8">    <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>,</a>
<a class="sourceLine" id="cb302-9" data-line-number="9">    <span class="co"># how should the transformed data be visually represented? - here: as points</span></a>
<a class="sourceLine" id="cb302-10" data-line-number="10">    <span class="dt">geom =</span> <span class="st">&quot;point&quot;</span>,</a>
<a class="sourceLine" id="cb302-11" data-line-number="11">    <span class="co"># should we tinker in any other way with the positioning of each element?</span></a>
<a class="sourceLine" id="cb302-12" data-line-number="12">    <span class="co"># - here: no, thank you!</span></a>
<a class="sourceLine" id="cb302-13" data-line-number="13">    <span class="dt">position =</span> <span class="st">&quot;identity&quot;</span></a>
<a class="sourceLine" id="cb302-14" data-line-number="14">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb302-15" data-line-number="15"><span class="st">  </span><span class="co"># x &amp; y axes are non-transformed continuous</span></a>
<a class="sourceLine" id="cb302-16" data-line-number="16"><span class="st">  </span><span class="kw">scale_x_continuous</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb302-17" data-line-number="17"><span class="st">  </span><span class="kw">scale_y_continuous</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb302-18" data-line-number="18"><span class="st">  </span><span class="co"># we use a cartesian coordinate system (not a polar or a geographical map)</span></a>
<a class="sourceLine" id="cb302-19" data-line-number="19"><span class="st">  </span><span class="kw">coord_cartesian</span>()</a></code></pre></div>
<p><img src="I2DA_files/figure-html/unnamed-chunk-181-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>In this explicit call, we still need to specify the data and the mapping (which variable to map onto which axis). But we need to specify much more. We tell <code>ggplot</code> that we want standard (e.g., not log-transformed axis). We also tell it that our axis are continuous, that the data should not be transformed and that the visual shape (=geom) to which the data is to be mapped is a point (hence the name <code>geom_point</code>).</p>
<p>It is not important to understand all of these components right now. It is important to have seen them once, and to understand that <code>geom_point</code> is a wrapper around this call which assumes reasonable defaults (such as non-transformed axis, points for representation etc.).</p>
</div>
<div id="layers-and-groups" class="section level3">
<h3><span class="header-section-number">6.3.3</span> Layers and groups</h3>
<p><code>ggplot</code> is the “grammar of <em>layered</em> graphs”. Plots are compositionally built by combining different layers, if need be. For example, we can use another function from the <code>geom_</code> family of functions to display a different visualization derived from the same data on top of our previous scatter plot.<a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a></p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb303-1" data-line-number="1">avocado_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb303-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb303-3" data-line-number="3">    <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb303-4" data-line-number="4">      <span class="co"># notice that we use the log (try without it to understand why)</span></a>
<a class="sourceLine" id="cb303-5" data-line-number="5">      <span class="dt">x =</span> <span class="kw">log</span>(total_volume_sold),</a>
<a class="sourceLine" id="cb303-6" data-line-number="6">      <span class="dt">y =</span> average_price</a>
<a class="sourceLine" id="cb303-7" data-line-number="7">    )</a>
<a class="sourceLine" id="cb303-8" data-line-number="8">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb303-9" data-line-number="9"><span class="st">  </span><span class="co"># add a scatter plot</span></a>
<a class="sourceLine" id="cb303-10" data-line-number="10"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb303-11" data-line-number="11"><span class="st">  </span><span class="co"># add a linear regression line</span></a>
<a class="sourceLine" id="cb303-12" data-line-number="12"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</a></code></pre></div>
<p><img src="I2DA_files/figure-html/unnamed-chunk-182-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Notice that layering is really sequential. To see this, just check what happens when we reverse the calls of the <code>geom_</code> functions in the previous example:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb304-1" data-line-number="1">avocado_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb304-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb304-3" data-line-number="3">    <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb304-4" data-line-number="4">      <span class="co"># notice that we use the log (try without it to understand why)</span></a>
<a class="sourceLine" id="cb304-5" data-line-number="5">      <span class="dt">x =</span> <span class="kw">log</span>(total_volume_sold),</a>
<a class="sourceLine" id="cb304-6" data-line-number="6">      <span class="dt">y =</span> average_price</a>
<a class="sourceLine" id="cb304-7" data-line-number="7">    )</a>
<a class="sourceLine" id="cb304-8" data-line-number="8">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb304-9" data-line-number="9"><span class="st">  </span><span class="co"># FIRST: add a linear regression line</span></a>
<a class="sourceLine" id="cb304-10" data-line-number="10"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb304-11" data-line-number="11"><span class="st">  </span><span class="co"># THEN: add a scatter plot</span></a>
<a class="sourceLine" id="cb304-12" data-line-number="12"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="I2DA_files/figure-html/unnamed-chunk-183-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>If you want lower layers to be visible behind layers added later, one possibility is to tinker with opacity, via the <code>alpha</code> parameter. Notice that the example below also changes the colors. The result is quite toxic, but at least you see the line underneath the semi-transparent points.</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb305-1" data-line-number="1">avocado_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb305-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb305-3" data-line-number="3">    <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb305-4" data-line-number="4">      <span class="co"># notice that we use the log (try without it to understand why)</span></a>
<a class="sourceLine" id="cb305-5" data-line-number="5">      <span class="dt">x =</span> <span class="kw">log</span>(total_volume_sold),</a>
<a class="sourceLine" id="cb305-6" data-line-number="6">      <span class="dt">y =</span> average_price</a>
<a class="sourceLine" id="cb305-7" data-line-number="7">    )</a>
<a class="sourceLine" id="cb305-8" data-line-number="8">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb305-9" data-line-number="9"><span class="st">  </span><span class="co"># FIRST: add a linear regression line</span></a>
<a class="sourceLine" id="cb305-10" data-line-number="10"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;darkgreen&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb305-11" data-line-number="11"><span class="st">  </span><span class="co"># THEN: add a scatter plot</span></a>
<a class="sourceLine" id="cb305-12" data-line-number="12"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.1</span>, <span class="dt">color =</span> <span class="st">&quot;orange&quot;</span>)</a></code></pre></div>
<p><img src="I2DA_files/figure-html/unnamed-chunk-184-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The aesthetics defined in the initial call to <code>ggplot</code> are global defaults for all layers to follow, unless they are overwritten. This also holds for the data supplied to <code>ggplot</code>. For example, we can create a second layer using another call to <code>geom_point</code> from a second data set (e.g., with a summary statistic), like so:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb306-1" data-line-number="1"><span class="co"># create a small tibble with the means of both</span></a>
<a class="sourceLine" id="cb306-2" data-line-number="2"><span class="co">#   variables of interest</span></a>
<a class="sourceLine" id="cb306-3" data-line-number="3">avocado_data_means &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb306-4" data-line-number="4"><span class="st">  </span>avocado_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb306-5" data-line-number="5"><span class="st">  </span><span class="kw">summarize</span>(</a>
<a class="sourceLine" id="cb306-6" data-line-number="6">    <span class="dt">mean_volume =</span> <span class="kw">mean</span>(<span class="kw">log</span>(total_volume_sold)),</a>
<a class="sourceLine" id="cb306-7" data-line-number="7">    <span class="dt">mean_price  =</span> <span class="kw">mean</span>(average_price)</a>
<a class="sourceLine" id="cb306-8" data-line-number="8">  )</a>
<a class="sourceLine" id="cb306-9" data-line-number="9">avocado_data_means</a></code></pre></div>
<pre><code>## # A tibble: 1 x 2
##   mean_volume mean_price
##         &lt;dbl&gt;      &lt;dbl&gt;
## 1        11.3       1.41</code></pre>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb308-1" data-line-number="1">avocado_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb308-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb308-3" data-line-number="3">    <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">log</span>(total_volume_sold),</a>
<a class="sourceLine" id="cb308-4" data-line-number="4">        <span class="dt">y =</span> average_price)</a>
<a class="sourceLine" id="cb308-5" data-line-number="5">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb308-6" data-line-number="6"><span class="st">  </span><span class="co"># first layer uses globally declared data &amp; mapping</span></a>
<a class="sourceLine" id="cb308-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb308-8" data-line-number="8"><span class="st">  </span><span class="co"># second layer uses different data set &amp; mapping</span></a>
<a class="sourceLine" id="cb308-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_point</span>(</a>
<a class="sourceLine" id="cb308-10" data-line-number="10">    <span class="dt">data =</span> avocado_data_means,</a>
<a class="sourceLine" id="cb308-11" data-line-number="11">    <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb308-12" data-line-number="12">      <span class="dt">x =</span> mean_volume,</a>
<a class="sourceLine" id="cb308-13" data-line-number="13">      <span class="dt">y =</span> mean_price</a>
<a class="sourceLine" id="cb308-14" data-line-number="14">    ), </a>
<a class="sourceLine" id="cb308-15" data-line-number="15">    <span class="co"># change shape of element to display (see below)</span></a>
<a class="sourceLine" id="cb308-16" data-line-number="16">    <span class="dt">shape =</span> <span class="dv">9</span>,</a>
<a class="sourceLine" id="cb308-17" data-line-number="17">    <span class="co"># change size of element to display</span></a>
<a class="sourceLine" id="cb308-18" data-line-number="18">    <span class="dt">size =</span> <span class="dv">12</span>,</a>
<a class="sourceLine" id="cb308-19" data-line-number="19">    <span class="dt">color =</span> <span class="st">&quot;skyblue&quot;</span></a>
<a class="sourceLine" id="cb308-20" data-line-number="20">  )</a></code></pre></div>
<p><img src="I2DA_files/figure-html/unnamed-chunk-186-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="grouping" class="section level3">
<h3><span class="header-section-number">6.3.4</span> Grouping</h3>
<p>Categorical distinction are frequently important in data analysis. Just think of the different combinations of factor levels in a factorial design, or the difference between conventionally grown and organically grown avocados. <code>ggplot</code> understands grouping very well and acts on appropriately, if you tell it to in the right way.</p>
<p>Grouping can be relevant for different aspects of a plot: the color of points or lines, their shape, or even whether to plot everything together or separately. For instance, we might want to display different types of avocados in different color. We can do this like so:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb309-1" data-line-number="1">avocado_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb309-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb309-3" data-line-number="3">    <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb309-4" data-line-number="4">      <span class="dt">x =</span> <span class="kw">log</span>(total_volume_sold), </a>
<a class="sourceLine" id="cb309-5" data-line-number="5">      <span class="dt">y =</span> average_price,</a>
<a class="sourceLine" id="cb309-6" data-line-number="6">      <span class="co"># use a different color for each type of avocado</span></a>
<a class="sourceLine" id="cb309-7" data-line-number="7">      <span class="dt">color =</span> type</a>
<a class="sourceLine" id="cb309-8" data-line-number="8">    )</a>
<a class="sourceLine" id="cb309-9" data-line-number="9">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb309-10" data-line-number="10"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> type))  </a></code></pre></div>
<p><img src="I2DA_files/figure-html/unnamed-chunk-187-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Notice that we added the grouping information inside of <code>aes</code> to the call of <code>ggplot</code>. This way the grouping is the global defaul for the whole plot. Check what happens when we then add another layer, like <code>geom_smooth</code>:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb310-1" data-line-number="1">avocado_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb310-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb310-3" data-line-number="3">    <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb310-4" data-line-number="4">      <span class="dt">x =</span> <span class="kw">log</span>(total_volume_sold), </a>
<a class="sourceLine" id="cb310-5" data-line-number="5">      <span class="dt">y =</span> average_price,</a>
<a class="sourceLine" id="cb310-6" data-line-number="6">      <span class="co"># use a different color for each type of avocado</span></a>
<a class="sourceLine" id="cb310-7" data-line-number="7">      <span class="dt">color =</span> type</a>
<a class="sourceLine" id="cb310-8" data-line-number="8">    )</a>
<a class="sourceLine" id="cb310-9" data-line-number="9">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb310-10" data-line-number="10"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> type))  <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb310-11" data-line-number="11"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</a></code></pre></div>
<p><img src="I2DA_files/figure-html/unnamed-chunk-188-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The regression lines will also be shown in the colors of the underlying scatter plot. We can change this by overwriting the <code>color</code> attribute locally, but then we loose the grouping information:</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb311-1" data-line-number="1">avocado_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb311-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb311-3" data-line-number="3">    <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb311-4" data-line-number="4">      <span class="dt">x =</span> <span class="kw">log</span>(total_volume_sold), </a>
<a class="sourceLine" id="cb311-5" data-line-number="5">      <span class="dt">y =</span> average_price,</a>
<a class="sourceLine" id="cb311-6" data-line-number="6">      <span class="co"># use a different color for each type of avocado</span></a>
<a class="sourceLine" id="cb311-7" data-line-number="7">      <span class="dt">color =</span> type</a>
<a class="sourceLine" id="cb311-8" data-line-number="8">    )</a>
<a class="sourceLine" id="cb311-9" data-line-number="9">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb311-10" data-line-number="10"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> type))  <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb311-11" data-line-number="11"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)</a></code></pre></div>
<p><img src="I2DA_files/figure-html/unnamed-chunk-189-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>To retrieve the grouping information, we can change the explicit keyword <code>group</code> (which just treats data from the relevant factor levels differently without directly changing their appearance):</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb312-1" data-line-number="1">avocado_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb312-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb312-3" data-line-number="3">    <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb312-4" data-line-number="4">      <span class="dt">x =</span> <span class="kw">log</span>(total_volume_sold), </a>
<a class="sourceLine" id="cb312-5" data-line-number="5">      <span class="dt">y =</span> average_price,</a>
<a class="sourceLine" id="cb312-6" data-line-number="6">      <span class="co"># use a different color for each type of avocado</span></a>
<a class="sourceLine" id="cb312-7" data-line-number="7">      <span class="dt">color =</span> type</a>
<a class="sourceLine" id="cb312-8" data-line-number="8">    )</a>
<a class="sourceLine" id="cb312-9" data-line-number="9">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb312-10" data-line-number="10"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> type))  <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb312-11" data-line-number="11"><span class="st">  </span><span class="kw">geom_smooth</span>(</a>
<a class="sourceLine" id="cb312-12" data-line-number="12">    <span class="co"># tell the smoother to deal with avocados types separately</span></a>
<a class="sourceLine" id="cb312-13" data-line-number="13">    <span class="kw">aes</span>(<span class="dt">group =</span> type),</a>
<a class="sourceLine" id="cb312-14" data-line-number="14">    <span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, </a>
<a class="sourceLine" id="cb312-15" data-line-number="15">    <span class="dt">color =</span> <span class="st">&quot;black&quot;</span></a>
<a class="sourceLine" id="cb312-16" data-line-number="16">  )</a></code></pre></div>
<p><img src="I2DA_files/figure-html/unnamed-chunk-190-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Finally, we see that the lines are not uniquely associable with the avocado type, so we can also change the regression line’s <code>shape</code> attribute conditional on avocado type:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb313-1" data-line-number="1">avocado_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb313-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb313-3" data-line-number="3">    <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb313-4" data-line-number="4">      <span class="dt">x =</span> <span class="kw">log</span>(total_volume_sold), </a>
<a class="sourceLine" id="cb313-5" data-line-number="5">      <span class="dt">y =</span> average_price,</a>
<a class="sourceLine" id="cb313-6" data-line-number="6">      <span class="co"># use a different color for each type of avocado</span></a>
<a class="sourceLine" id="cb313-7" data-line-number="7">      <span class="dt">color =</span> type</a>
<a class="sourceLine" id="cb313-8" data-line-number="8">    )</a>
<a class="sourceLine" id="cb313-9" data-line-number="9">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb313-10" data-line-number="10"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> type))  <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb313-11" data-line-number="11"><span class="st">  </span><span class="kw">geom_smooth</span>(</a>
<a class="sourceLine" id="cb313-12" data-line-number="12">    <span class="co"># tell the smoother to deal with avocados types separately</span></a>
<a class="sourceLine" id="cb313-13" data-line-number="13">    <span class="kw">aes</span>(<span class="dt">group =</span> type, <span class="dt">linetype =</span> type),</a>
<a class="sourceLine" id="cb313-14" data-line-number="14">    <span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, </a>
<a class="sourceLine" id="cb313-15" data-line-number="15">    <span class="dt">color =</span> <span class="st">&quot;black&quot;</span></a>
<a class="sourceLine" id="cb313-16" data-line-number="16">  )</a></code></pre></div>
<p><img src="I2DA_files/figure-html/unnamed-chunk-191-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="example-of-a-customized-plot" class="section level3">
<h3><span class="header-section-number">6.3.5</span> Example of a customized plot</h3>
<p>If done with the proper mind and heart, plots intended to share (and to communicate a point, following the idea of hypothesis-driven visualization) will usually require a lot of tweaking. We will cover some of the most frequently relevant tweaks in Section <a href="Chap-02-04-customization.html#Chap-02-04-customization">6.6</a>.</p>
<p>To nevertheless get a feeling of where the journey is going, at least roughly, here is an example of a plot of the avocado data which is much more tweaked and honed. No claim is intended regarding the false idea that this plot is in any sense optimal. There is not even a clear hypothesis or point to communicate. This just showcases some functionality. Notice, for instance, that this plot uses two layers, invoked by <code>geom_point</code> which shows the scatter plot of points and <code>geom_smooth</code> which layers on top the point cloud regression lines (one for each level in the grouping variable).</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb314-1" data-line-number="1"><span class="co"># pipe data set into function `ggplot`</span></a>
<a class="sourceLine" id="cb314-2" data-line-number="2">avocado_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb314-3" data-line-number="3"><span class="st">  </span><span class="co"># reverse factor level so that horizontal legend entries align with</span></a>
<a class="sourceLine" id="cb314-4" data-line-number="4"><span class="st">  </span><span class="co"># the majority of observations of each group in the plot</span></a>
<a class="sourceLine" id="cb314-5" data-line-number="5"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb314-6" data-line-number="6">    <span class="dt">type =</span> <span class="kw">fct_rev</span>(type)</a>
<a class="sourceLine" id="cb314-7" data-line-number="7">  ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb314-8" data-line-number="8"><span class="st">  </span><span class="co"># initialize the plot</span></a>
<a class="sourceLine" id="cb314-9" data-line-number="9"><span class="st">  </span><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb314-10" data-line-number="10">    <span class="co"># defined mapping</span></a>
<a class="sourceLine" id="cb314-11" data-line-number="11">    <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb314-12" data-line-number="12">      <span class="co"># which variable goes on the x-axis</span></a>
<a class="sourceLine" id="cb314-13" data-line-number="13">      <span class="dt">x =</span> total_volume_sold, </a>
<a class="sourceLine" id="cb314-14" data-line-number="14">      <span class="co"># which variable goes on the y-axis</span></a>
<a class="sourceLine" id="cb314-15" data-line-number="15">      <span class="dt">y =</span> average_price, </a>
<a class="sourceLine" id="cb314-16" data-line-number="16">      <span class="co"># which groups of variables to distinguish</span></a>
<a class="sourceLine" id="cb314-17" data-line-number="17">      <span class="dt">group =</span> type, </a>
<a class="sourceLine" id="cb314-18" data-line-number="18">      <span class="co"># color and fill to change by grouping variable</span></a>
<a class="sourceLine" id="cb314-19" data-line-number="19">      <span class="dt">fill =</span> type, </a>
<a class="sourceLine" id="cb314-20" data-line-number="20">      <span class="dt">linetype =</span> type,</a>
<a class="sourceLine" id="cb314-21" data-line-number="21">      <span class="dt">color =</span> type</a>
<a class="sourceLine" id="cb314-22" data-line-number="22">    )</a>
<a class="sourceLine" id="cb314-23" data-line-number="23">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb314-24" data-line-number="24"><span class="st">  </span><span class="co"># declare that we want a scatter plot</span></a>
<a class="sourceLine" id="cb314-25" data-line-number="25"><span class="st">  </span><span class="kw">geom_point</span>(</a>
<a class="sourceLine" id="cb314-26" data-line-number="26">    <span class="co"># set low opacity for each point</span></a>
<a class="sourceLine" id="cb314-27" data-line-number="27">    <span class="dt">alpha =</span> <span class="fl">0.1</span></a>
<a class="sourceLine" id="cb314-28" data-line-number="28">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb314-29" data-line-number="29"><span class="st">  </span><span class="co"># add a linear model fit (for each group)</span></a>
<a class="sourceLine" id="cb314-30" data-line-number="30"><span class="st">  </span><span class="kw">geom_smooth</span>(</a>
<a class="sourceLine" id="cb314-31" data-line-number="31">    <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, </a>
<a class="sourceLine" id="cb314-32" data-line-number="32">    <span class="dt">method =</span> <span class="st">&quot;lm&quot;</span></a>
<a class="sourceLine" id="cb314-33" data-line-number="33">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb314-34" data-line-number="34"><span class="st">  </span><span class="co"># change the default (normal) of x-axis to log-scale</span></a>
<a class="sourceLine" id="cb314-35" data-line-number="35"><span class="st">  </span><span class="kw">scale_x_log10</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb314-36" data-line-number="36"><span class="st">  </span><span class="co"># add dollar signs to y-axis labels</span></a>
<a class="sourceLine" id="cb314-37" data-line-number="37"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>dollar) <span class="op">+</span></a>
<a class="sourceLine" id="cb314-38" data-line-number="38"><span class="st">  </span><span class="co"># change axis labels and plot title &amp; subtitle</span></a>
<a class="sourceLine" id="cb314-39" data-line-number="39"><span class="st">  </span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb314-40" data-line-number="40">    <span class="dt">x =</span> <span class="st">&#39;Total volume sold (on a log scale)&#39;</span>,</a>
<a class="sourceLine" id="cb314-41" data-line-number="41">    <span class="dt">y =</span> <span class="st">&#39;Average price&#39;</span>,</a>
<a class="sourceLine" id="cb314-42" data-line-number="42">    <span class="dt">title =</span> <span class="st">&quot;Avocado prices against amount sold&quot;</span>,</a>
<a class="sourceLine" id="cb314-43" data-line-number="43">    <span class="dt">subtitle =</span> <span class="st">&quot;With linear regression lines&quot;</span></a>
<a class="sourceLine" id="cb314-44" data-line-number="44">  )</a></code></pre></div>
<p><img src="I2DA_files/figure-html/unnamed-chunk-192-1.png" width="672" style="display: block; margin: auto;" /></p>
<!-- exercise 1 -->
<div class="exercises">
<p><strong>Exercise E.1: Some algebra</strong></p>
<p>Determine which graph was created with which code:</p>
<p>Code 1:</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb315-1" data-line-number="1">code_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">ggplot</span>(avocado_data,</a>
<a class="sourceLine" id="cb315-2" data-line-number="2">    <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb315-3" data-line-number="3">      <span class="dt">x =</span> average_price,</a>
<a class="sourceLine" id="cb315-4" data-line-number="4">      <span class="dt">y =</span> <span class="kw">log</span>(total_volume_sold), </a>
<a class="sourceLine" id="cb315-5" data-line-number="5">      <span class="dt">color =</span> type</a>
<a class="sourceLine" id="cb315-6" data-line-number="6">    )</a>
<a class="sourceLine" id="cb315-7" data-line-number="7">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb315-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_point</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb315-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</a></code></pre></div>
<p>Code 2:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb316-1" data-line-number="1">code_<span class="dv">2</span> &lt;-<span class="kw">ggplot</span>(avocado_data,</a>
<a class="sourceLine" id="cb316-2" data-line-number="2">    <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb316-3" data-line-number="3">      <span class="dt">x =</span> <span class="kw">log</span>(total_volume_sold),</a>
<a class="sourceLine" id="cb316-4" data-line-number="4">      <span class="dt">y =</span> average_price,</a>
<a class="sourceLine" id="cb316-5" data-line-number="5">      <span class="dt">color =</span> type</a>
<a class="sourceLine" id="cb316-6" data-line-number="6">    )</a>
<a class="sourceLine" id="cb316-7" data-line-number="7">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb316-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_point</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb316-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</a></code></pre></div>
<p>Code 3:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb317-1" data-line-number="1">code_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">ggplot</span>(avocado_data,</a>
<a class="sourceLine" id="cb317-2" data-line-number="2">    <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb317-3" data-line-number="3">      <span class="dt">x =</span> <span class="kw">log</span>(total_volume_sold),</a>
<a class="sourceLine" id="cb317-4" data-line-number="4">      <span class="dt">y =</span> average_price</a>
<a class="sourceLine" id="cb317-5" data-line-number="5">    )</a>
<a class="sourceLine" id="cb317-6" data-line-number="6">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb317-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb317-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.1</span>, <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb317-9" data-line-number="9"><span class="st">   </span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb317-10" data-line-number="10">    <span class="dt">x =</span> <span class="st">&#39;Total volume sold (on a log scale)&#39;</span>,</a>
<a class="sourceLine" id="cb317-11" data-line-number="11">    <span class="dt">y =</span> <span class="st">&#39;Average price&#39;</span>,</a>
<a class="sourceLine" id="cb317-12" data-line-number="12">    <span class="dt">title =</span> <span class="st">&quot;Avocado prices against amount sold&quot;</span></a>
<a class="sourceLine" id="cb317-13" data-line-number="13">  )</a></code></pre></div>
<p>Code 4:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb318-1" data-line-number="1">code_<span class="dv">4</span> &lt;-<span class="st"> </span><span class="kw">ggplot</span>(avocado_data,</a>
<a class="sourceLine" id="cb318-2" data-line-number="2">    <span class="dt">mapping =</span> <span class="kw">aes</span>(</a>
<a class="sourceLine" id="cb318-3" data-line-number="3">      <span class="dt">x =</span> <span class="kw">log</span>(total_volume_sold),</a>
<a class="sourceLine" id="cb318-4" data-line-number="4">      <span class="dt">y =</span> average_price,</a>
<a class="sourceLine" id="cb318-5" data-line-number="5">      <span class="dt">linetype =</span> type</a>
<a class="sourceLine" id="cb318-6" data-line-number="6">    )</a>
<a class="sourceLine" id="cb318-7" data-line-number="7">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb318-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb318-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.1</span>, <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb318-10" data-line-number="10"><span class="st">   </span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb318-11" data-line-number="11">    <span class="dt">x =</span> <span class="st">&#39;Total volume sold (on a log scale)&#39;</span>,</a>
<a class="sourceLine" id="cb318-12" data-line-number="12">    <span class="dt">y =</span> <span class="st">&#39;Average price&#39;</span>,</a>
<a class="sourceLine" id="cb318-13" data-line-number="13">    <span class="dt">title =</span> <span class="st">&quot;Avocado prices against amount sold&quot;</span></a>
<a class="sourceLine" id="cb318-14" data-line-number="14">  )</a></code></pre></div>
<p>Plot 1:
<img src="I2DA_files/figure-html/unnamed-chunk-198-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Plot 2:
<img src="I2DA_files/figure-html/unnamed-chunk-199-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Plot 3:
<img src="I2DA_files/figure-html/unnamed-chunk-200-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="collapsibleSolution">
<button class="trigger">
Solution
</button>
<div class="content">
<p>
Plot 1: Code 4
</p>
<p>
Plot 2: Code 1
</p>
<p>
Plot 3: Code 2
</p>
</div>
</div>
</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Wickham2010:A-Layered-Gramm">
<p>Wickham, Hadley. 2010. “A Layered Grammar of Graphics.” <em>Journal of Computational and Graphical Statistics</em> 19 (1): 3–28.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="24">
<li id="fn24"><p>If you run this code for yourself, the output is likely to look different from what is shown here. This is because this web-book uses a default theme for all of its plots. We will come back to customization with themes later.<a href="Chap-02-04-ggplot.html#fnref24" class="footnote-back">↩</a></p></li>
<li id="fn25"><p>Notice that, as soon as we add the linear regression line, it makes sense to use the logarith of the <code>total_volume_sold</code> because otherwise the fit is quite ridiculous. The logarithm helps to spread out the large number of data points where <code>total_volume_sold</code> is very low, and to “bring back to the flock” the data points where the <code>total_volume_sold</code> is outliery high. It can be quite useful to use such transformations, if they are well understood. It is controversial whether such transformations should precede statistical analyses, but that is not important right now.<a href="Chap-02-04-ggplot.html#fnref25" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Chap-02-04-good-visualization.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Chap-02-04-geoms.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["I2DA.epub", "I2DA.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
